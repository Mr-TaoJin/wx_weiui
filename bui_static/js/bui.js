/*!
 *  BUI 简介 
 *  
 *  v1.2.2 date: 2016-12-18
 *  
 *  BUI 是 Button UI 的简称,以 Button 为中心的UI框架, 
 *  在按钮的基础上嵌入布局扩展大量的常用控件, 
 *  只要进行简单的组装,就能快速开发应用,
 *  并能保持PC跟手机端的调试一致,效果一致,开发一致.
 *  
 *  BUI 专注于移动开发体验(包括不限于Bingotouch,link,微信,及webapp开发)
 *  -----------------------------------------------------------
 *  BUI Team
 *  部门: 政企体验创新部
 *  产品经理: 区柏荣
 *  代码设计: 王伟深 杨俊标
 *  产品设计师: 邝德如 范菊 唐竹晗
 *  -----------------------------------------------------------
 *  BUI 反馈邮箱: wangwsh@bingosoft.net
 *
 *  Copyright (c) 2016
 */
var libs=Zepto,bui=function(e,t){var n={};return n.debug=!0,n.log=!0,n.config={},n.config.namespace="bui",n.config.classNamePrefix=n.config.namespace+"-",n.config.version="1.2.2",n.config.versionCode=20161218,n.config.viewport={zoom:!0},n.config.init={auto:!0},n.config.dialog={},n.config.confirm={},n.config.alert={},n.config.hint={},n.config.loading={},n.config.mask={},n.config.list={},n.config.listview={},n.config.scroll={},n.config.pullrefresh={},n.config.select={},n.config.sidebar={},n.config.slide={},n.config.actionsheet={},n.config.dropdown={},n.config.accordion={},n.config.stepbar={},n.config.rating={},n.config.number={},n.config.file={},n.config.fileSelect={},n.config.upload={},n.config.download={},n.prefix=function(e){return n.config.classNamePrefix+e},n.controls=function(e){function t(e){e=e||{};var t=e.id||"",o=n.inArray(t,i,"id");return o>-1?(n.log&&console.error("ID:"+t+"只能初始化1次"),!0):(i.push(e),!1)}var i=[],o={checkRepeat:t};return o},n.require=function(e,t){var i,o=[],o=e.split("."),a=n;for("bui"===o[0]&&(o=o.slice(1)),i=0;i<o.length;i+=1)"undefined"==typeof a[o[i]]&&(a[o[i]]=function(e){t&&t(n.widget(o[0]))}),a=a[o[i]];return a},n.swipeDirection=function(e,t,n,i){var o=t-e,a=i-n,r=Math.abs(o),s=Math.abs(a),c=9,l=3;return c>r&&c>s?!1:r/s>l?o>0?"swipeRight":"swipeLeft":a>0?"swipeDown":"swipeUp"},n.widget=function(e){return"string"==typeof e&&this[e]?this[e]:this},n.option=function(t,n){if(this.config.hasOwnProperty(t)&&"undefined"!=typeof n){var i={};i[t]=n;var o=e.extend({},this.config,i);this.init(o)}else{if("[object Object]"!==Object.prototype.toString.call(t))return this.config.hasOwnProperty(t)&&"undefined"==typeof n?this.config[t]:this.config;var o=e.extend({},this.config,t);this.init(o)}return this},n.dispatchEvent=function(e,t,n){e&&e.dispatchEvent&&t&&e.dispatchEvent(new Event(t,{bubbles:!0,cancelable:!0,detail:n}))},n.on=function(e,n,i,o){var a,r=/hp-tablet/gi.test(navigator.appVersion),s="ontouchstart"in t&&!r,c=s?"touchstart":"mousedown",l=s?"touchmove":"mousemove",u=s?"touchend":"mouseup",n=n,o=1==o,i=i||function(){};for(a=0;a<(n.length||0);a++)switch(e){case"touchstart":n[a].addEventListener(c,i,o);break;case"touchmove":n[a].addEventListener(l,i,o);break;case"touchend":n[a].addEventListener(u,i,o),"mouseup"==u&&document.documentElement.addEventListener("mouseleave",i,o);break;default:n[a].addEventListener(e,i,o)}},n.off=function(e,n,i,o){var a,r=/hp-tablet/gi.test(navigator.appVersion),s="ontouchstart"in t&&!r,c=s?"touchstart":"mousedown",l=s?"touchmove":"mousemove",u=s?"touchend":"mouseup",n=n,o=1==o,i=i||function(){};for(a=0;a<n.length;a++)switch(e){case"touchstart":n[a].removeEventListener(c,i,o);break;case"touchmove":n[a].removeEventListener(l,i,o);break;case"touchend":n[a].removeEventListener(u,i,o),"mouseup"==u&&document.documentElement.removeEventListener("mouseleave",i,o);break;default:n[a].addEventListener(e,i,o)}},n}(libs,window);!function(e,t){function n(t,n){function i(){e.config.viewport.zoom?(g.style.fontSize=k+"px",t=k):t=S>-1?C[S]:60}function o(e){return b}function a(e){return w}function r(e){return x}function s(e){return y}function c(e){return m}var l=document.querySelector('meta[name="viewport"]'),u="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",d=function(e){return document.getElementsByTagName(e)[0]};if(l)l.content=u;else{var f=document.createElement("meta");f.name="viewport",f.content=u;var h=d("head");h.appendChild(f)}var p=100,v=n||540,g=d("html"),m=window.devicePixelRatio,b=document.documentElement.clientWidth,w=document.documentElement.clientHeight,x=parseInt(b)*parseInt(m),y=parseInt(w)*parseInt(m),k=t?t:(b/v*p).toFixed(2),T=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732],C=[44.44,59.26,66.67,69.44,71.11,76.3,76.67,80.56,88.89,94.81,100,70,70,70,70,70],S=e.inArray(b,T);return i(),{width:o,height:a,fontSize:t,screenWidth:r,screenHeight:s,ratio:c,init:i}}return e.viewport=n,e}(bui||{},libs),function(e,t){return e.touch=function(n){function i(e){var t=p?e.touches[0]:e;b.x1=t.pageX,b.y1=t.pageY,b.direction="",m=!0,d.onStart&&d.onStart.call(this,e,b)}function o(t){if(m){var n=p?t.touches[0]:t;b.x2=n.pageX,b.y2=n.pageY,b.direction||(b.direction=e.swipeDirection(b.x1,b.x2,b.y1,b.y2)),"swipeLeft"!==b.direction&&"swipeRight"!==b.direction||t.preventDefault(),b.direction&&d.onMove&&d.onMove.call(this,t,b)}}function a(e){v+=b.y2-b.y1,g+=b.x2-b.x1,b.lastX=g,b.lastY=v,d.onEnd&&d.onEnd.call(this,e,b),count=0,b={x1:0,x2:0,y1:0,y2:0,direction:""},m=!1}function r(t,n){var n=n||x;switch(t){case"touchstart":e.off(t,n,i,y);break;case"touchmove":e.off(t,n,o,y);break;case"touchend":e.off(t,n,a,y);break;default:e.off("touchstart",n,i,y),e.off("touchmove",n,o,y),e.off("touchend",n,a,y)}}function s(t,n){var n=n||x;switch(t){case"touchstart":e.on(t,n,i,y);break;case"touchmove":e.on(t,n,o,y);break;case"touchend":e.on(t,n,a,y);break;default:e.on("touchstart",n,i,y),e.on("touchmove",n,o,y),e.on("touchend",n,a,y)}}function c(e,t,n,i){var n,i=i||w,e=e||0,t=t||0;n="number"==typeof n?"all "+n+"ms":n||"all 300ms",i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+e+","+t+")",transform:"translate("+e+","+t+")"})}function l(){s()}var u={id:"",handle:"",useCapture:!1,onStart:null,onMove:null,onEnd:null},d=t.extend(!0,{},u,n),f={on:s,off:r,move:c},h=/hp-tablet/gi.test(navigator.appVersion),p="ontouchstart"in window&&!h,v=0,g=0,m=!1,b={x1:0,x2:0,y1:0,y2:0,direction:""},w=e.obj(d.id),x=d.handle?w.find(d.handle):w,y=d.useCapture;return l(),f},e}(bui||{},libs),function(e,t){return e.unit={},e.unit.remToPx=function(e){var t=window.viewport.fontSize,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window.viewport.fontSize,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var t=100,e=(parseFloat(e)/t).toFixed(2);return e},e}(bui||{},libs),function(e,t){return e.obj=function(e){var n;if(e&&"object"==typeof e)return n=t(e);if(e&&"string"==typeof e){if(e.indexOf("#")>-1)return n=t(e);if(e.indexOf(".")>-1)return n=t(e).eq(0);if(e.indexOf(".")<0&&e.indexOf("#")<0)return n=t("#"+e)}},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.setUrlParams=function(e,t,n){var i,n=0!=n,t="object"==typeof t?t:{},o="";for(var a in t){var r=n?encodeURIComponent(t[a]):t[a];o+="&"+a+"="+r}var s=o.substr(1);return i=""==s?e:e+"?"+s},e.getUrlParams=function(e){var e=0!=e,t=window.location.search,n=new Object;if(-1!=t.indexOf("?")){var i=t.substr(1);strs=i.split("&");for(var o=0;o<strs.length;o++){var a=e?decodeURIComponent(strs[o].split("=")[1]):strs[o].split("=")[1];n[strs[o].split("=")[0]]=a}}return n},e.getUrlParam=function(e){var t=window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},e.inArray=function(e,t,n){var t=t||[];for(var i in t)try{var o=n?t[i][n]:t[i];if(o===e)return i}catch(a){}return-1},e.indexArray=function(e,t,n){var t=t||[],i=[];for(var o in t)try{var a=n?t[o][n]:t[o];a===e&&i.push(+o)}catch(r){}return i},e.compareArray=function(e,t,n){var t=t||[];for(var i in t)try{var o=n?t[i][n]:t[i];if(o===e)return!0}catch(a){}return!1},e.removeArray=function(e,t,n){var i=t||[];for(var o in i)try{var a=n?i[o][n]:i[o];a===e&&(i=i.splice(o,1))}catch(r){}return t},e.filterArray=function(e,t,n){var i=[],t=t||[];for(var o in t)try{var a=n?t[o][n]:t[o],r=new RegExp(e);r.test(a)&&i.push(t[o])}catch(s){}return i},e.storage=function(t){function n(t,n,i){var o=u.getItem(t),a=[],r="",s=i?n[i]:n;if(null===o)a.push(n),r=JSON.stringify(a),u.setItem(t,r);else{var l=JSON.parse(o),d=i?e.compareArray(s,l,i):e.compareArray(s,l);if(d){e.removeArray(s,l,i);l.unshift(n);r=JSON.stringify(l),u.setItem(t,r)}else{l.unshift(n);l.length>c&&l.pop(),r=JSON.stringify(l),u.setItem(t,r)}}return this}function i(t,n){var i,n=0!=n,o=t&&u.getItem(t)||"";if(n)try{i=o&&JSON.parse(o)||[]}catch(a){e.log&&console.error(a)}else i=o||"";return i}function o(t,o,a){if(a=a||null,"string"!=typeof t)return void(e.log&&console.error("要删除的字段名只能是字符串"));if(void 0!==o&&null!=o||!a)if(o){var r=u.getItem(t),s=null;if(!r)return;try{s=JSON.parse(r)}catch(c){e.log&&console.error(c)}if(e.compareArray(o,s,a)){e.removeArray(o,s,a);try{datastring=JSON.stringify(s)||"",u.setItem(t,datastring)}catch(c){e.log&&console.error(c)}}}else u.removeItem(t);else{var l=i(t)[0]||{};l[a]&&delete l[a],n(t,l)}return this}function a(t,o,a){var r=t&&i(t);return r=r&&r[0]||{},void 0===a?void(e.log&&console.error("save方法中"+t+"对象的keyname不能为空")):("string"==typeof a&&(r[a]=o||"",n(t,r)),this)}function r(e,t){if(void 0===t)e&&o(e);else if("string"==typeof t){var a=e&&i(e)[0]||{};t&&delete a[t],n(e,a)}return this}function s(){return u.clear(),this}var c,l;"number"==typeof t||"string"==typeof t?(c=t||1,l=!0):(c=t&&t.size||1,l=!t||0!=t.local);var u=l?localStorage:sessionStorage;return{get:i,set:n,remove:o,save:a,removeItem:r,clear:s}},e.platform=function(e){function t(e){return/Windows NT/i.test(l)}function n(e){return/Macintosh/i.test(l)}function i(e){return/(Android|Linux)/i.test(l)}function o(e){return/(iPhone)/i.test(l)}function a(e){return/(iPad)/i.test(l)}function r(e){return/(iPhone|iPad|iOS)/i.test(l)}function s(e){return/(micromessenger)/i.test(l)}function c(e){return/(crosswalk)/i.test(l)}var l=navigator.userAgent;return{isAndroid:i,isIphone:o,isIpad:a,isIos:r,isWeiXin:s,isBingotouch:c,isMac:n,isWindow:t}},e}(bui||{},libs),function(e,t){return e.animate=function(n){function i(t){return t.id?(E=e.obj(t.id),E.css({"-webkit-transition":N,transition:N}),D=t.open3D,R=t.zoom,M=t.animates,j=P.config=t,this):void e.hint("animate id不能为空")}function o(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:R?-(t/100)+"rem":-t+"px";var n="translateX("+e+")";return M.push(n),this}function a(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:R?t/100+"rem":t+"px";var n="translateX("+e+")";return M.push(n),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:R?-(t/100)+"rem":-t+"px";var n="translateY("+e+")";return M.push(n),this}function s(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:R?t/100+"rem":t+"px";var n="translateY("+e+")";return M.push(n),this}function c(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",n="scale("+e+")";return M.push(n),this}function l(e){var e=String(e),t="scaleX("+e+")";return M.push(t),this}function u(e){var e=String(e),t="scaleY("+e+")";return M.push(t),this}function d(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotate("+e+")";return M.push(n),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateX("+e+")";return M.push(n),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateY("+e+")";return M.push(n),this}function p(e){var e,n=String(e),i=[];n.indexOf(",")>-1?(i=n.split(","),e="",t.each(i,function(t,n){2>t&&(e+=n.indexOf("deg")>-1?","+n:","+n+"deg")}),e=e.substr(1)):e=n.indexOf("deg")>-1?n:n+"deg,0";var o="skew("+e+")";return M.push(o),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewX("+e+")";return M.push(n),this}function g(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewY("+e+")";return M.push(n),this}function m(e){var t=String(e);return E.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function b(e,t){var n=t||"ease-out";return N="number"==typeof e?"all "+e+"ms "+n:0==e||"none"==e?"none":1==e?"all 300ms "+n:e||"all 300ms "+n,E.css({"-webkit-transition":N,transition:N}),this}function w(e){var t=D?M.join("")+"translateZ(0)":M.join("");return E.css({"-webkit-transform":t,transform:t}),"none"!=N&&E.one("webkitTransitionEnd",function(){e&&e.call(P,this)}),M=[],this}function x(e){var t=D?M.join("")+"translateZ(0)":M.join("");return E.css({"-webkit-transform":t,transform:t}),"none"!=N&&E.one("webkitTransitionEnd",function(){e&&e.call(P,this)}),this}function y(e,t){return E.css({"-webkit-transform":e,transform:e}),t&&"none"!=b&&E.one("webkitTransitionEnd",function(){t.call(P,this)}),this}function k(e){return e=parseFloat(e)||100,D=!0,E.parent().css({perspective:e+"px"}),this}function T(e){return E.css({"-webkit-transform":"",transform:""}),M.push(""),this}function C(e,t){var n={};return"object"==typeof e?(n=e,t=""):"string"==typeof e&&(n[e]=t||""),E.css(n),this}function S(t){var n={};return e.widget.call(n,t)}function F(t,n){return e.option.call(P,t,n)}var I={id:"",zoom:!0,open3D:!1,animates:[]};if("object"==typeof n&&n.id)n=n||{};else{var O=n||"";n={},n.id=O}var E,D,R,M,P={origin:m,transition:b,property:C,open3D:k,transform:y,start:x,stop:w,left:o,right:a,up:r,down:s,scale:c,scaleX:l,scaleY:u,rotate:d,rotateX:f,rotateY:h,skew:p,skewX:v,skewY:g,reverse:T,widget:S,option:F,config:j,init:i},j=P.config=t.extend(!0,{},I,n),N="all 300ms ease-out";return i(j),P},e}(bui||{},libs),function(e,t){"use strict";return e.toggle=function(n){function i(t){if(t=t||g,!t.id)return void e.hint("toggle id不能为空");d=e.obj(t.id),g=v.config=t,p=d.attr("class")||"";var n=t.effect,i=n&&(e.inArray(n,m.show)||e.inArray(n,m.hide));return 0>i?(h=m.show[0],f=m.hide[0],this):(h=m.show[i],void(f=m.hide[i]))}function o(e,t){return"function"==typeof e?(t=e,e=h||""):e=e||h||"",g.showClass=e,d.attr("class",p).removeClass(f).addClass("animated "+e),"showIn"==e||"showOut"==e?t&&t.call(v,this):d.one("webkitAnimationEnd",function(){t&&t.call(v,this)}),this}function a(e,t){return"function"==typeof e?(t=e,e=f||""):e=e||f||"",d.attr("class",p).removeClass(h).addClass("animated "+e),g.hideClass=e,"showIn"==e||"showOut"==e?(d.css("display","none"),t&&t.call(v,this)):d.one("webkitAnimationEnd",function(){d.css("display","none"),t&&t.call(v,this)}),this}function r(){return d.remove(),this}function s(t){var n={};return e.widget.call(n,t)}function c(t,n){return e.option.call(v,t,n)}var l={id:"",effect:"fadeIn"};if("string"==typeof n){var u=n||"";n={},n.id=u}var d,f,h,p,v={show:o,hide:a,remove:r,widget:s,option:c,config:g,init:i},g=v.config=t.extend(!0,{},l,n),m={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","flipInX","flipInY","showIn"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","flipOutX","flipOutY","showOut"]};return i(g),v},e}(bui||{},libs),function(e,t){return e.mask=function(n){function i(n){return n=n||g,g=v.config=n,m=n.appendTo?e.obj(n.appendTo):t("body"),h=m.css("position"),n.autoTrigger&&s(n),this}function o(e){var n=t.extend(!0,g,e);w.off("click.bui").on("click.bui",function(e){n.autoClose&&c(),n.callback&&n.callback.call(this,v),e.stopPropagation()})}function a(n){var i=t.extend(!0,g,n),o=i.background?i.background:"rgba(0,0,0,"+i.opacity+")",a="";return a+='<div id="'+b+'" class="'+e.prefix("mask")+'" style="background:'+o+';"></div>'}function r(t){var n=a(t);return m.append(n),w=e.obj(b),o(t),this}function s(e){return c(),r(e),m.css("position","relative"),this}function c(){return w&&w.length&&(w.remove(),m.css("position",h||"static"),w=null),this}function l(){return w&&w.length&&(w.hide(),m.css("position",h||"static")),this}function u(e){return w&&w.length?(w.show(),m.css("position","relative")):s(e),this}function d(t){var n={};return e.widget.call(n,t)}function f(t,n){return e.option.call(v,t,n)}var h,p={appendTo:"",opacity:.4,background:"",autoTrigger:!1,autoClose:!1,callback:null},v={add:s,hide:l,show:u,remove:c,widget:d,option:f,config:g,init:i},g=v.config=t.extend(!0,{},p,e.config.mask,n),m=t("body"),b=e.guid(),w=e.obj(b);return i(g),v},e}(bui||{},libs),function(e,t){return e.loading=function(n){function i(n){return n=n||b,b=m.config=n,w=e.obj(n.appendTo)||t("body"),n.autoTrigger&&r(n),v=n.mask&&e.mask(n),this}function o(t){t=t||{};var n=t.text,i=w.width(),o=n&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),a=-(i/2),r=-(o/2),s="block"==t.display?"":e.prefix("loading-inline"),c="";c+='<div id="'+x+'" class="'+e.prefix("loading")+" "+s+'" style="width:'+i+"px;height:"+o+"px;line-height:1;margin-left:"+a+"px;margin-top:"+r+'px;" >',t.onlyText||(c+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),n&&(c+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>"),c+="</div>";var l=t&&t.template?t.template:c;return l}function a(t){var n=o(t);return w.append(n),y=e.obj(x),p=y.children(".bui-loading-text"),u(t),this}function r(e){var n=t.extend(!0,b,e);return h=n.text,s(),a(n),v&&v.add(),this}function s(){return y&&y.length&&(y.remove(),y=null,v&&v.remove()),this}function c(e){var n=t.extend(!0,b,e);return y&&y.length?(h!=n.text?(p.html(n.text),h=n.text):p.html(h),y.css("display","block"),v&&v.show()):r(n),this}function l(e){return y&&(y.css("display","none"),v&&v.hide()),this}function u(t){return t=t||{},y.off("click.bui").on("click.bui",function(e){t.autoClose&&s(),t.callback&&t.callback.call(this,m),e.stopPropagation()}),w.off("click.bui","."+e.prefix("mask")).on("click.bui","."+e.prefix("mask"),function(e){t.autoClose&&s()}),this}function d(t){var n={mask:v};return e.widget.call(n,t)}function f(t,n){return e.option.call(m,t,n)}var h,p,v,g={appendTo:"",width:30,height:30,text:"正在加载...",onlyText:!1,mask:!0,autoTrigger:!1,autoClose:!0,display:"inline",template:null,callback:null},m={start:r,stop:s,show:c,hide:l,widget:d,option:f,config:b,init:i},b=m.config=t.extend(!0,{},g,e.config.loading,n),w=t("body"),x=e.guid(),y=e.obj(x);return i(b),m},e}(bui||{},libs),function(e,t){"use strict";return e.dialog=function(n){function i(t){switch(t=t||x,g=t.effect,t.position){case"top":y="bui-dialog-top",g="fadeInDown";break;case"bottom":y="bui-dialog-bottom",g="fadeInUp";break;case"left":y="bui-dialog-left",g="fadeInLeft";break;case"right":y="bui-dialog-right",g="fadeInRight";break;case"center":y="bui-dialog-center",g=t.effect}if(t.fullscreen&&(y="bui-dialog-fullscreen",g=t.effect),t.render)t.id=e.guid(),l(t),p=e.obj(t.id);else{if(!t.id)return void e.hint("dialog id不能为空");p=e.obj(t.id),p.addClass(y)}return p.css("display","none"),v=e.toggle({id:t.id,effect:g}),x=w.config=t,this}function o(e){var n="";return n+='<div id="'+e.id+'" class="bui-dialog '+y+'" style="display:block">',e.title&&(n+='	<div class="bui-dialog-head">'+e.title+"</div>"),n+='	<div class="bui-dialog-main">',e.content&&(n+=e.content),n+="	</div>",e.buttons.length&&(n+='	<div class="bui-dialog-foot bui-box">',t(e.buttons).each(function(e,t){n+='		<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"}),n+="	</div>"),e.close&&(n+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),n+="</div>"}function a(t){p.css("display","block");var n=p.attr("status")||0;if(0==n){k=x.width||p.width(),T=x.height||p.height();var i=e.unit.pxToRemZoom(k),o=e.unit.pxToRemZoom(T),a=x.zoom?i+"rem":k+"px",s=x.zoom?o+"rem":T+"px",c=x.zoom?"-"+o/2+"rem":"-"+T/2+"px",l=x.zoom?"-"+i/2+"rem":"-"+k/2+"px";if("center"!=x.position||x.fullscreen||p.css({width:a,height:s,top:"50%","margin-top":c,left:"50%","margin-left":l,right:"auto"}),"left"!=x.position&&"right"!=x.position||x.fullscreen||p.css({width:a}),"top"!=x.position&&"bottom"!=x.position||x.fullscreen||p.css({height:s}),x.scroll){var d=p.children(".bui-dialog-head"),f=p.children(".bui-dialog-foot"),h=p.children(".bui-dialog-main"),g=d.length?d.height()<40?40:d.height():0,b=f.length?f.height():0,y=e.unit.pxToRemZoom(g),C=e.unit.pxToRem(b),S=T-g-b,F=e.unit.pxToRemZoom(S),I=x.zoom?F+"rem":S+"px",O=x.zoom?y+"rem":g+"px";x.zoom?C+"rem":b+"px";h.css({height:I}),d.css({height:O})}p.attr("status","1")}return v.show(function(e){r=!0,t&&t.call(w,v)}),m=x.mask&&e.mask({opacity:x.opacity,autoTrigger:!0,callback:function(e){x.onMask&&x.onMask()}}),u(),p.trigger("open",[r]),this}function r(e){return r}function s(e){var e=e||x.onClose;try{v.hide(function(t){r=!1,e&&e.call(w,v)}),m&&m.remove(),p.trigger("open",[r])}catch(t){}return this}function c(){try{p.remove(),m&&(m.remove(),t("main").css({"overflow-y":"auto"}))}catch(e){}return this}function l(e){var n=o(e);return t("body").append(n),this}function u(){return p.off("click.bui",".bui-dialog-close").on("click.bui",".bui-dialog-close",function(e){x.callback&&x.callback.call(this,w),x.autoClose&&(x.render?s(c):s()),e.stopPropagation()}),p.off("click.bui",".bui-dialog-foot .bui-btn").on("click.bui",".bui-dialog-foot .bui-btn",function(e){x.callback&&x.callback.call(this,w),x.autoClose&&(x.render?s(c):s()),e.stopPropagation()}),this}function d(e){return b.title="提示",b.content="",b.close=!1,b.render=!0,b.autoClose=!0,b.mask=!0,b.buttons=["确定"],x=t.extend(!0,b,e),i(x),this}function f(t){var n={toggle:v};return e.widget.call(n,t)}function h(t,n){return e.option.call(w,t,n)}var p,v,g,m,b={id:"",title:"",effect:"fadeInDown",content:"",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.1,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,buttons:[],onMask:null,onClose:null,callback:null},w={open:a,close:s,isOpen:r,create:d,remove:c,widget:f,option:h,config:x,init:i},x=w.config=t.extend(!1,{},b,e.config.dialog,n),y="",k="",T="",r=!1;return x.id&&i(x),w},e.alert=function(n,i){var o=e.dialog(),a={};a.title="提示",a.width=400,a.height=240,a.scroll=!0,a.position="center",a.autoClose=!0,a.zoom=!0,a.callback=i||function(){};var r=t.extend(a,e.config.alert);if("string"==typeof n&&n.indexOf("<")>-1&&n.indexOf(">")>-1)r.content="<xmp>"+n+"</xmp>";else if("object"==typeof n){var s=JSON.stringify(n);r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+s+"</div>"}else{var s=n;r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+s+"</div>"}return o.create(r).open(),o},e.confirm=function(n,i){var o=e.dialog(),a={};a.title="提示",a.width=400,a.height=240,a.scroll=!0,a.autoClose=!0,a.zoom=!0,a.position="center",a.buttons=["取消","确定"],a.callback=i||function(){};var r={};return"object"==typeof n?(n.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n.content+"</div>",r=t.extend(a,e.config.confirm,n)):(r=t.extend(a,e.config.confirm),r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n+"</div>",r.callback=i||function(){}),o.create(r).open(),o},e}(bui||{},libs),function(e,t){"use strict";return e.hint=function(n,i){function o(t){t=t||m;var n=e.guid();return w="top"===t.position?"fadeInDown":"bottom"===t.position?"fadeInUp":t.effect,m=g.config=t,a(n,t.content,b,t.appendTo),++b,p=e.toggle({id:"#"+n,effect:w}),x=!0,p.show(),t.autoClose&&(v&&clearTimeout(v),v=setTimeout(function(e){t.onClose&&t.onClose.call(g),s()},t.interval)),e.obj(n).off("click.bui",".bui-hint-close").on("click.bui",".bui-hint-close",function(e){s(),t.onClose&&t.onClose.call(this,g)}),this}function a(n,i,o,a){var r,s="11"+o,c=e.obj(a)||t("body");switch(m.position){case"top":r="bui-hint-top";break;case"bottom":r="bui-hint-bottom";break;case"center":r="bui-hint-center"}var l=m.background?m.background:"rgba(0,0,0,"+m.opacity+")",u='<div id="'+n+'" class="bui-hint '+r+'" style="background:'+l+";z-index:"+s+'">'+i+(m.close?'<div class="bui-hint-close"><i class="icon-close"></i></div>':"")+"</div>";c.append(u),a&&c.css("position","relative")}function r(){return x}function s(){return p&&(x=!1,p.hide(function(e){p.remove()})),this}function c(e){return p&&(x=!1,p.hide(function(t){e&&e.call(this,g)})),this}function l(e){return p&&(x=!0,p.show(function(t){e&&e.call(this,g)})),this}function u(t){var n={toggle:p};return e.widget.call(n,t)}function d(t,n){return e.option.call(g,t,n)}var f={appendTo:"",content:"",interval:2e3,autoClose:!0,close:!1,opacity:.4,background:"",effect:"fadeInUp",position:"bottom",onClose:null};if("number"==typeof n||"string"==typeof n){var h=n||"";n={},n.content=h,n.onClose=i||null}else"object"==typeof n&&n.content&&(n=n);var p,v,g={remove:s,hide:c,show:l,isShow:r,widget:u,option:d,config:m,init:o},m=g.config=t.extend(!0,{},f,e.config.hint,n),b=0,w="",x=!1;return m.content&&o(m),g},e}(bui||{},libs),function(e,t){return e.pullrefresh=function(n){function i(t){return t=t||P,t.id?(w=e.obj(t.id),P=M.config=t,x=w[0],y=w.children(O),k=w.children(E),T=w.children(D),S=o,C=t.refreshTips.end,I=e.loading({appendTo:y,width:"30",height:"30",autoClose:!1,text:C,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1}),t.autoLoad&&(A=!0,I.start({text:t.refreshTips.start,onlyText:!1}),S()),r(t),g(t.height),this):void e.hint("pullrefresh id不能为空")}function o(){N=(new Date).getTime(),P.onRefresh&&P.onRefresh.call(M)}function a(){var e,t=(new Date).getTime(),n=t-N,i=1e3,o=60*i,a=60*o,r=Math.floor(n/a),s=Math.floor(n/o);Math.floor(n/i);return e=0>=r&&0>=s?"刚刚更新":0>=r&&s>0?s+"分钟前更新":"上次更新时间:"+(10>r?"0"+r:r)+":"+(10>s?"0"+s:s)}function r(e){j||s()}function s(){F=e.touch({id:x,onStart:c,onMove:l,onEnd:u})}function c(e,n){C=P.lastUpdated?a():P.refreshTips.end,t(window).scrollTop()<=0&&w.scrollTop()<=0&&P.onRefresh&&!A?(F.on("touchmove"),F.on("touchend")):(F.off("touchmove"),F.off("touchend"))}function l(e,t){"swipeDown"==t.direction&&(moveY=Math.abs(t.y2-t.y1),h(moveY/2,!1),moveY>=P.distance?I.show({text:P.refreshTips.release,onlyText:!0}):I.show({text:C,onlyText:!0}),e.preventDefault(),e.stopPropagation())}function u(e,t){"swipeDown"==t.direction&&(moveY>=P.distance?(h(P.distance/2),I.show({text:P.refreshTips.start,onlyText:!1}),A=!0,P.onRefresh&&S()):h(),e.stopPropagation(),t={})}function d(e){return j=!0,F.off(),h(),e&&e.call(this,M),this}function f(e){return j=!1,F.on(),e&&e.call(this,M),this}function h(e,t,n){t=0!=t,e=e||0,A=!1;var i=t?"all 300ms ease-out":"none";return F.move(0,e+"px",i,k),T.length&&F.move(0,e+"px",i,T),k.one("webkitTransitionEnd",function(){w.css({"-webkit-transition":"none",transition:"none"}),k.css({"-webkit-transition":"none",transition:"none"}),T.css({"-webkit-transition":"none",transition:"none"}),I&&I.stop(),n&&n.call(this,M)}),this}function p(){isFail=!0,I.start({text:P.refreshTips.fail,onlyText:!0,callback:function(e){S()}})}function v(){P.onRefresh&&S(),f()}function g(e){e=e?parseFloat(e):t(window).height()-(t("header").height()||0)-(t("footer").height()||0)-(x&&x.offsetTop||0),w.height(e)}function m(t){var n={loading:I,touch:F};return e.widget.call(n,t)}function b(t,n){return e.option.call(M,t,n)}var w,x,y,k,T,C,S,F,I,O="."+e.prefix("scroll-head"),E="."+e.prefix("scroll-main"),D="."+e.prefix("scroll-foot"),R={id:"",handle:"",childrenTop:O,childrenMain:E,distance:100,autoLoad:!0,lastUpdated:!0,height:0,refreshTips:{start:"刷新中...",release:"松开刷新",end:"继续下拉刷新",fail:"点击重新加载",success:"刷新成功"},onRefresh:null},M={reverse:h,refresh:v,setHeight:g,fail:p,lock:d,unlock:f,widget:m,option:b,config:P,init:i},P=M.config=t.extend(!0,{},R,e.config.pullrefresh,n),j=!1,N=(new Date).getTime(),A=!1;return i(P),M},e}(bui||{},libs),function(e,t){return e.scroll=function(n){function i(n){return n=n||U,F=t(window),n.id?(C=e.obj(n.id),U=z.config=n,S=C[0],I=C.find(n.children),$childrenTop=C.children(N),E=C.children(A),O=C.children(V),E.css({position:"relative"}),M=e.loading({appendTo:O,autoClose:!1,text:n.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1}),D=s,R=r,n.refresh&&n.onRefresh?(P=e.pullrefresh({id:n.id,onRefresh:D,distance:n.distance,lastUpdated:n.lastUpdated,height:n.height,refreshTips:n.refreshTips,autoLoad:n.autoRefresh}),P.lock(),Y=!0):v(n.height),R&&R.call(z,W,K),_=!n.onLoad,o(n),this):void e.hint("scroll id不能为空")}function o(e){_?C.off("scroll",a):C.off("scroll").on("scroll",a)}function a(e){var t=e.target;t.scrollTop||0;t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-U.endDistance)&&U.onLoad&&(U.page=z.config.page=++W,U.autoScroll&&R&&R.call(z,U.page,K)),U.onScrolling&&U.onScrolling.call(this,e,z)}function r(e,t){return $=!0,B&&!J&&(U.page=z.config.page=e,M&&M.start({text:U.scrollTips.start,onlyText:!1}),U.onLoad&&U.onLoad.call(z,e,t)),Y&&U.refresh&&P&&P.unlock(),this}function s(){$=!0,B=!0,J=!1,X=!1,W=H,K=U.pageSize,Z={},M&&M.start({text:U.scrollTips.end,onlyText:!0}),U.page=z.config.page=W,U.onRefresh&&U.onRefresh.call(z,W,K)}function c(e,t,n){var n=0!=n;t=t||[],$=!1;var i=C.find(U.children),o=(i.height()*i.length,parseInt(C.height())),a=parseInt(C.find(U.childrenMain)[0]&&C.find(U.childrenMain)[0].scrollHeight);if(n)if(t&&t.length>K-1)B=!0,J=!1,X=!1,M&&M.start({text:U.scrollTips.end,onlyText:!0}),o>a&&U.autoNext&&R&&R.call(z,++W,K);else{B=!1,J=!0;var r=X&&t.length<1?U.scrollTips.nodata:U.scrollTips.last;M&&M.start({text:r,onlyText:!0})}else B=!1,J=!0,M&&M.stop();return Z[e]=t}function l(e){return P&&P.reverse(),e&&e.call(z,P),this}function u(e){return Z}function d(e){Z={}}function f(e,t){return q=!0,Y=!0,M.show({text:U.scrollTips.fail,onlyText:!0,callback:function(n){r(e,t)}}),P&&P.lock(),this}function h(t,n){var i,o,a=[];if(t&&n)for(i in Z){var r=e.filterArray(t,Z[i],n);if(r.length)for(o in r)a.push(r[o])}return a}function p(e,t){var e=e||0;I=C.find(U.children);var n=C.height(),i=parseFloat(I.height()),o=S.scrollHeight,a=i*parseInt(e)-i;return o>n&&(S.scrollTop=a,t&&t.call(z,parseInt(e))),this}function v(e){return e=e?parseFloat(e):t(window).height()-(t("header").height()||0)-(t("footer").height()||0)-(S&&S.offsetTop||0),C.height(e),this}function g(e){return _=!0,o(),this}function m(e){return _=!1,o(),this}function b(){return P&&P.refresh(),this}function w(e){var e=e||W;return W=e,R&&R.call(z,W,K),this}function x(){return R&&R.call(z,++W,K),this}function y(){return W-- >0&&R&&R.call(z,W--,K),this}function k(t){var n={pullrefresh:P,loading:M};return e.widget.call(n,t)}function T(t,n){return e.option.call(z,t,n)}var C,S,F,I,O,E,D,R,M,P,j="."+e.prefix("list")+" li",N="."+e.prefix("scroll-head"),A="."+e.prefix("scroll-main"),V="."+e.prefix("scroll-foot"),L={id:"",children:j,childrenTop:N,childrenMain:A,childrenBottom:V,distance:100,endDistance:1,height:0,page:1,pageSize:10,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,scrollTips:{start:"加载中...",end:"上拉加载更多",nodata:"暂无数据",last:"最后一页",fail:"点击重新加载"},refreshTips:{start:"刷新中...",release:"松开刷新",end:"继续下拉刷新",fail:"点击重新加载",success:"刷新成功"},onScrolling:null,onRefresh:null,onLoad:null},z={reverse:l,updateCache:c,getCache:u,clearCache:d,fail:f,filter:h,to:p,lock:g,unlock:m,refresh:b,load:w,nextPage:x,prevPage:y,setHeight:v,widget:k,option:T,config:U,init:i},U=z.config=t.extend(!0,{},L,e.config.scroll,n),H=U.page,q=!1,Y=!1,_=!1,$=!1,q=!1,X=!0,B=!0,J=!1,W=U.page,K=U.pageSize,Z={};return i(U),z},e}(bui||{},libs),function(e,t){return e.list=function(n){function i(t){t=t||m,u=e.obj(t.id),m=g.config=t,w=m.data;var n=0==m.refresh?null:r;return p=bui.scroll({id:t.id,children:t.handle,page:t.page,pageSize:t.pageSize,height:t.height,refresh:t.refresh,autoNext:t.autoNext,autoScroll:t.autoScroll,scrollTips:t.scrollTips,refreshTips:t.refreshTips,lastUpdated:t.lastUpdated,onRefresh:n,onLoad:a}),d=u.find(t.children),f=d.children(t.handle),o(t),this}function o(e){return e.callback&&d.off("click.bui",e.handle).on("click.bui",e.handle,function(t){e.callback.call(this,t,g,p)}),this}function a(e,i,o){var o=o||"append";return w=t.extend(!0,{},x,m.data,w),w[m.field.page]=e,w[m.field.size]=i,m.page=g.config.page=e,h=bui.ajax({url:m.url,data:w,method:m.method,headers:m.headers,dataType:m.dataType,contentType:m.contentType,timeout:m.timeout,"native":m["native"]}).done(function(t,i,a){function r(e){var t,n=e[l[u]],i=l[u+1];return t="string"==typeof n?JSON.parse(n):n||[],i&&i in t?(u++,r(t)):(u=0,t)}var s,c;if(s="string"==typeof t?t&&JSON.parse(t)||{}:t||{},""==m.field.data)c=s||[];else{var l=[];m.field.data.indexOf(".")>-1?l=m.field.data.split("."):l.push(m.field.data);var u=0;c=r(s)}var f=n.template&&n.template(c,s,e)||null;f&&d[o](f),p&&p.updateCache(e,c),m.refresh&&p.reverse(),m.onLoad&&m.onLoad.call(g,p,c,a)}).fail(function(t,n,o){
m.onFail&&m.onFail.call(g,n,p,e,o),p&&p.fail(e,i,t)}),this}function r(){var e=b,t=m.pageSize;return m.page=g.config.page=e,m.onRefresh&&m.onRefresh.call(g,p),a(e,t,"html"),this}function s(e,n){var i;if("string"==typeof n)try{i=JSON.parse(n)}catch(o){return void console.log("data 参数必须为对象")}else i=n;return w=t.extend(!0,{},x,i)}function c(t){var n={scroll:p,ajax:h};return e.widget.call(n,t)}function l(t,n){return"data"==t&&"undefined"!=typeof n?s(t,n):e.option.call(g,t,n)}var u,d,f,h,p,v={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:"",timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"加载中...",end:"上拉加载更多",nodata:"暂无数据",last:"最后一页",fail:"点击重新加载"},refreshTips:{start:"刷新中...",release:"松开刷新",end:"继续下拉刷新",fail:"点击重新加载",success:"刷新成功"},lastUpdated:!0,page:1,pageSize:10,autoNext:!0,autoScroll:!0,"native":!0,refresh:!0,children:".bui-list",handle:".bui-btn",height:0,template:null,onRefresh:null,onLoad:null,onFail:null,callback:null},g={widget:c,option:l,config:m,init:i},m=g.config=t.extend(!0,{},v,e.config.list,n),b=m.page,w={},x=m.data;return i(m),g},e}(bui||{},libs),function(e,t){return e.slide=function(n){function i(n){return n=n||X,n.id?(T=e.obj(n.id),R=0,X=$.config=n,N=n.direction,q=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,C=n.menu.indexOf("#")>-1?t(n.menu):T.find(n.menu).eq(0),S=C.children(),O=n.prev.indexOf("#")>-1?t(n.prev):T.find(n.prev).eq(0),E=n.next.indexOf("#")>-1?t(n.next):T.find(n.next).eq(0),F=n.children.indexOf("#")>-1?t(n.children):T.find(n.children).eq(0),I=F.children(),remHeight=n.zoom?parseFloat(n.height)/100+"rem":parseFloat(n.height),L=Y-(t("header").height()||0)-(t("footer").height()||0)-(T[0]&&T[0].offsetTop||0),z=0==n.height?L:remHeight,U=T.find(n.menu).length?parseFloat(z-C.height())+"px":parseFloat(z)+"px",V=n.fullscreen?parseFloat(Y)+"px":0==n.height?U:remHeight,A=n.fullscreen?q:n.width||q,D=I.length,P=parseFloat(A)*D,j=parseFloat(V)*D,o(),B={x:{swipeDir:"swipeLeft",swipeDir2:"swipeRight",width:parseFloat(A)},y:{swipeDir:"swipeUp",swipeDir2:"swipeDown",width:parseFloat(V)}},a(),n.autoplay&&f(),this):void e.hint("slide id不能为空")}function o(e){if(!T.length)return!1;m(R);var n={x:{parentInitKey:"width",parentInitValue:P,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+A+"px;height:"+V+";"+(X.scroll?"overflow-y:auto;":"overflow:hidden;")},y:{parentInitKey:"height",parentInitValue:j,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+A+"px;height:"+V+";"+(X.scroll?"overflow-y:auto;":"overflow:hidden;")}};F.parent()[n[N].parentInitKey](n[N].parentInitValue);var i,o=I.length;for(i=0;o>i;i++)I[i].style.cssText=n[N].boxItemCSS;if(F[0].style.cssText=n[N].boxCss,T.css({position:"relative",overflow:"hidden",width:A+"px",height:z}),I.height(z),X.fullscreen&&(t("main").css({position:"static"}),T.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":110}),I.addClass("bui-box-center")),X.autopage){var a=I.length,r=F.find(".active").index()+1,s=x(a,r);T.children(".bui-slide-head").length&&T.children(".bui-slide-head").remove(),T.append(s),S=T.find(X.menu).eq(0).children()}S.length&&T.off("click.bui",S).on("click.bui",S,function(e){var n=t(this).hasClass("active"),i=t(this).index();n||(X.animate?d(i):d(i,"none"),m(i),X.autoplay&&f())}),O.length&&T.off("click.bui",O).on("click.bui",O,function(e){v(),e.stopPropagation()}),E.length&&T.off("click.bui",E).on("click.bui",E,function(e){g(),e.stopPropagation()}),X.callback&&T.off("click.bui",I).on("click.bui",I,function(e){var t=this;X.callback.call(t,e,$)})}function a(t){return F.length?(H=e.touch({id:F,handle:I,onStart:r,onMove:s,onEnd:c}),void(X.swipe||H.off())):!1}function r(e,t){A=parseFloat(A),V=parseFloat(V),X.autoplay&&h(),X.onStart&&X.onStart.call(this,e,t,$)}function s(e,n){var i=t(this).index(),o=-i*A,a=-i*V,r=n.x2-n.x1,s=n.y2-n.y1;B.x.move=o+r,B.x.absDelta=Math.abs(r),B.y.move=a+s,B.y.absDelta=Math.abs(s),n.direction!==B[N].swipeDir&&n.direction!==B[N].swipeDir2||(X.delay&&B[N].absDelta>X.distance&&u(B[N].move,"none"),X.delay||u(B[N].move,"none"),X.onMove&&X.onMove.call(this,e,n,$),e.stopPropagation())}function c(e,n){var i=t(this).index(),o=-i*A,a=-i*V,r=n.x2-n.x1,s=n.y2-n.y1;B.x.delta=o,B.x.absDelta=Math.abs(r),B.y.delta=a,B.y.absDelta=Math.abs(s),B[N].absDelta>X.distance?(l.call(this,n,B),X.onEnd&&X.onEnd.call(this,e,n,$)):B[N].absDelta<X.distance&&u(B[N].delta),X.autoplay&&f()}function l(e,n){R=t(this).index();var i;if(e.direction==n[N].swipeDir)i=R>=I.length-1?R:R+1,n[N].delta=-i*n[N].width,u(n[N].delta),R=i,m(i);else{if(e.direction!=n[N].swipeDir2)return;i=R>0?R-1:R,n[N].delta=-i*n[N].width,u(n[N].delta),R=i,m(i)}}function u(e,t){var n=X.transition,t=t||"all "+n+"ms",e=e||0;switch(N){case"x":H&&H.move(e+"px",0,t,F);break;case"y":H&&H.move(0,e+"px",t,F)}return this}function d(e,t){var e=parseInt(e),n={x:{transform:-e*parseFloat(A)},y:{transform:-e*parseFloat(V)}};return e>=I.length||0>e?!1:(u(n[N].transform,t),R=e,m(e),X.autoplay&&f(),this)}function f(e){var e=e||X.interval;h(),X.autoplay=!0;var t=R;M=setInterval(function(e){t>=0&&D-1>t?t+=1:t=0,d(t)},e)}function h(e){if(M)try{window.clearInterval(M),X.autoplay=!1}catch(t){}return this}function p(e){f(e)}function v(){var e=R-1;return d(e),this}function g(){var e=R+1;return d(e),this}function m(e){e=e||0,I.removeClass("active"),I.eq(e).addClass("active"),S.removeClass("active"),S.eq(e).addClass("active")}function b(){return H&&H.off(),this}function w(e){return H&&H.on(),this}function x(e,t){var n,i="",t=t||1;for(i+='<div class="bui-slide-head">',i+="<ul >",n=1;n<Number(e)+1;n++)i+="<li "+(n==t?'class="active"':"")+">"+n+"</li>";return i+="</ul >",i+="</div >"}function y(t){var n={touch:H};return e.widget.call(n,t)}function k(t,n){return e.option.call($,t,n)}var T,C,S,F,I,O,E,D,R,M,P,j,N,A,V,L,z,U,H,q,Y,_={id:"",menu:".bui-slide-head ul",children:".bui-slide-main ul",prev:".bui-slide-prev",next:".bui-slide-next",width:0,height:0,zoom:!0,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,distance:80,direction:"x",autoplay:!1,scroll:!1,fullscreen:!1,autopage:!1,callback:null,onStart:null,onMove:null,onEnd:null},$={to:d,prev:v,next:g,stop:h,start:p,lock:b,unlock:w,widget:y,option:k,config:X,init:i},X=$.config=t.extend(!0,{},_,e.config.slide,n),B={x:{},y:{}};return i(X),$},e}(bui||{},libs),function(e,t){return e.sidebar=function(n){function i(n){return n=n||L,M=document.documentElement.clientWidth,P=document.documentElement.clientHeight,n.id?(T=e.obj(n.id),L=A.config=n,uiMask=e.mask({appendTo:t(n.handle)[0],opacity:.01,callback:function(e){v()}}),n.trigger&&(C=e.obj(n.trigger)),S=e.obj(n.handle)||t(".bui-page"),F=T.parent(),E=n.position,R=n.zoom?parseFloat(n.width)/100+"rem":parseFloat(n.width)+"px",D=parseFloat(n.width),menuHeight=n.fullHeight?P:n.height,r(),o(),l(),this):void e.hint("sidebar id不能为空")}function o(){return C&&C.off("click.bui").on("click.bui",function(e){a(),e.stopPropagation()}),this}function a(e){var t=T.hasClass("active");t?v():p()}function r(t){I=e.animate(T),O=e.animate(S),T.parent().css({"overflow-x":"hidden",width:M,height:menuHeight}),T.css({position:"absolute","z-index":0,width:R,height:menuHeight,"overflow-y":"auto"}),S.css({position:"relative","z-index":10}),"left"==E?(T.css({left:"0",right:"auto",top:0,bottom:0}),I.transition(!1).left(D/2).stop(),O.transition(!1).right(0).stop()):"right"==E&&(T.css({left:"auto",right:0,top:0,bottom:0}),I.transition(!1).right("100%").stop(),O.transition(!1).left("0").stop())}function s(){uiMask&&uiMask.show()}function c(){uiMask&&uiMask.hide(),uiMask&&t(document).off("click.bui",".bui-mask")}function l(){return F.length?void(L.swipe&&(j=e.touch({id:F,onStart:u,onMove:d,onEnd:f}))):!1}function u(t,n){e.sidebar.activeUI&&A!==e.sidebar.activeUI}function d(t,n){e.sidebar.activeUI&&A!==e.sidebar.activeUI||("left"==E&&"swipeRight"===n.direction&&(e.sidebar.activeUI=A,!b&&h(n),t.stopPropagation()),"right"==E&&"swipeLeft"===n.direction&&(e.sidebar.activeUI=A,!b&&h(n),t.stopPropagation()))}function f(t,n){if(A===e.sidebar.activeUI){var i=Math.abs(n.x2-n.x1);L.autoTrigger&&i>L.maxDistance&&V[E].directionOpen==n.direction?(L.onLoad&&L.onLoad.call(this,A),t.stopPropagation()):i>L.distance&&V[E].directionOpen==n.direction?(p(),t.stopPropagation()):i<L.distance&&V[E].directionOpen==n.direction?(v(),t.stopPropagation()):V[E].directionClose==n.direction&&(v(),t.stopPropagation())}}function h(e){var t=e.x2-e.x1,n=Math.abs(t);if("left"==E){var i=t,o=-D/2+i;o=o>0?0:o,"swipeLeft"==e.direction&&(i=D+i,o=-D/2>t?-D/2:t)}else if("right"==E){var i=t,o=D+i;o=o>D?D:o,"swipeRight"==e.direction&&(i=-D+i,o=-D>t?-D:t)}menuDeltaXRem=L.zoom?o/100+"rem":o+"px",deltaXRem=L.zoom?i/100+"rem":i+"px",L.delay&&n>L.distance&&(j.move(menuDeltaXRem,0,"none",T),j.move(deltaXRem,0,"none",S)),L.delay||(j.move(menuDeltaXRem,0,"none",T),j.move(deltaXRem,0,"none",S))}function p(t,n){var n=0==n?!1:n;return C&&C.addClass("active"),S.find(".bui-page").css("overflow-y","hidden"),"left"==E?(I.transition(n).right("0").stop(),O.transition(n).right(D).stop()):"right"==E&&(I.transition(n).right(0).stop(),O.transition(n).left(D).stop()),L.mask&&s(),b=!0,e.sidebar.activeUI=A,t&&t.call(this,A),T.trigger("open",[b]),this}function v(t,n){var n=0==n?!1:n;return C&&C.removeClass("active"),S.find(".bui-page").css("overflow-y","auto"),"left"==E?(I.transition(n).left(D/2).stop(),O.transition(n).left("0").stop()):"right"==E&&(I.transition(n).right("100%").stop(),O.transition(n).left("0").stop()),c(),b=!1,e.sidebar.activeUI=null,t&&t.call(this,A),T.trigger("open",[b]),this}function g(e){return j.off(),this}function m(e){return l(),this}function b(){return b}function w(){b=!1,e.sidebar.activeUI=null}function x(){return e.sidebar.activeUI}function y(t){var n={touch:j};return e.widget.call(n,t)}function k(t,n){return e.option.call(A,t,n)}var T,C,S,F,I,O,E,D,R,M,P,j,N={id:"",trigger:"",handle:".bui-page",width:280,height:0,position:"left",fullHeight:!0,mask:!0,zoom:!0,swipe:!0,delay:!1,distance:80,autoTrigger:!1,maxDistance:280,onLoad:null},A={active:x,isActive:b,unActive:w,open:p,close:v,lock:g,unlock:m,widget:y,option:k,config:L,init:i},V={left:{directionOpen:"swipeRight",directionClose:"swipeLeft"},right:{directionOpen:"swipeLeft",directionClose:"swipeRight"}},L=A.config=t.extend(!0,{},N,e.config.sidebar,n),b=!1;return i(L),A},e}(bui||{},libs),function(e,t){return e.listview=function(n){function i(t){return t=t||g,t.id?(c=e.obj(t.id),g=v.config=t,h=document.documentElement.clientWidth,d=t.position,f=t.distance,l=c.children(),o(t),this):void e.hint("listview id不能为空")}function o(n){l.css({position:"relative",overflow:"hidden"}),l.each(function(i,o){var r=t(o).attr("status");if(!r){var s=a(n);t(o).append(s),t(o).attr("status","1")}var c=t(o).children(".bui-listview-menu"),l=r?c.width():n.width,h=e.guid();c.attr("id",h),u=t(o).children(n.handle);var p=t(o).height();if(c.length)var v=e.sidebar({id:h,handle:u,width:l,height:p,position:d,fullHeight:!1,mask:n.mask,delay:n.delay,distance:f,autoTrigger:n.autoTrigger,maxDistance:n.maxDistance,onLoad:n.onLoad});t(document).on("touchstart",function(e){v&&v.isActive()&&v.close()}),n.callback&&c.off("click.bui",".bui-btn").on("click.bui",".bui-btn",function(e){n.callback.call(this,e,v)})})}function a(n){var i="",o=e.guid();return i+='<div id="'+o+'" class="bui-listview-menu">',t.each(n.data,function(e,t){i+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),i+="</div>"}function r(t){var n={};return e.widget.call(n,t)}function s(t,n){return e.option.call(v,t,n)}var c,l,u,d,f,h,p={id:"",data:[],handle:".bui-btn",width:200,position:"right",mask:!0,delay:!1,distance:80,callback:null,autoTrigger:!1,maxDistance:280,onLoad:null},v={widget:r,option:s,config:g,init:i},g=v.config=t.extend(!0,{},p,e.config.listview,n);return i(g),v},e}(bui||{},libs),function(e,t){return e.searchbar=function(n){function i(t){return t=t||p,c=e.obj(t.id),p=h.config=t,l=c.find(t.handle),u=c.find("input"),c.find(t.handleRemove).length>0?d:c.find(".bui-input").append('<i class="'+t.handleRemove.substr(1)+'"></i>'),d=c.find(t.handleRemove),d.hide(),o(t),this}function o(e){return c.off("click.bui",e.handle).on("click.bui",e.handle,function(t){var n=u.val();e.callback&&e.callback.call(this,h,n)}),c.off("click.bui",e.handleRemove).on("click.bui",e.handleRemove,function(){u.val("");var n=u.val();t(this).hide(),e.onRemove&&e.onRemove.call(this,h,n)}),c.off("input","input").on("input","input",function(){var t=u.val();t?d.show():d.hide(),e.onInput&&e.onInput.call(this,h,t)}),this}function a(){return l.length?l.trigger("click"):e.hint("It can not find handle"),this}function r(t){var n={};return e.widget.call(n,t)}function s(t,n){return e.option.call(h,t,n)}var c,l,u,d,f={id:"",handle:".icon-search",handleRemove:".icon-remove",onInput:null,onRemove:null,callback:null},h={search:a,widget:r,option:s,config:p,init:i},p=h.config=t.extend(!0,{},f,e.config.searchbar,n);return i(p),h},e}(bui||{},libs),function(e,t){"use strict";return e.select=function(n){function i(n){if(n=n||C,w=[],x=[],g=n.id?n.id:e.guid(),C=T.config=n,n.popup){if(n.data.length){var i=o(n.data);t("body").append(i)}y=e.dialog({id:g,effect:n.effect,mask:n.mask,position:n.position,autoClose:!1,height:n.height,width:n.width,zoom:!1,fullscreen:n.fullscreen,onMask:function(e){r()}}),v=e.obj(g)}else{if(!n.id)return void e.hint("select id 必须有");if(v=e.obj(n.id),n.data.length){var i=o(n.data);v.append(i)}}return n.trigger&&(p=e.obj(n.trigger),b=p.find(n.triggerChildren).length?p.find(n.triggerChildren):p,m=n.title||t.trim(b.html()),n.title&&b.html(n.title),p.off("click.bui").on("click.bui",function(e){a()})),v.off("change","input").on("change","input",function(i){var o=t(this).val(),a=t(this).parent().index();name=t(this).attr("text")||t(this).parent().text();var l=t(this).is(":checked");switch(n.type){case"radio":w=[],x=[],w.push(name),x.push(o),s(o||""),c(name||m||"");break;case"select":w=[],x=[],w.push(name),x.push(o),s(o||""),c(name||m||"");break;case"checkbox":var u=v.attr("value"),d=v.attr("text");u&&u.indexOf(",")>-1&&(x=u.split(","),w=d.split(",")),l?(w.push(name),x.push(o)):(e.removeArray(o,x),e.removeArray(name,w)),s(x.join(",")||""),c(w.join(",")||"")}n.popup&&n.autoClose&&r(),n.onChange&&n.onChange.call(this,T,a),i.stopPropagation()}),v.off("click.bui",".bui-dialog-foot .span1 .bui-btn").on("click.bui",".bui-dialog-foot .span1 .bui-btn",function(e){n.callback&&n.callback.call(this,T),e.stopPropagation()}),this}function o(n){var i=e.guid(),o="";return C.popup&&(o+='<div id="'+g+'" class="bui-dialog bui-dialog-select">',C.title&&(o+='<div class="bui-dialog-head">'+C.title+"</div>"),o+='  <div class="bui-dialog-main">'),o+='    <div class="bui-list">',t.each(n,function(e,t){var n="";"checkbox"==C.type?n='        <input id="check-'+i+"-"+e+'" type="checkbox" class="'+(C.className||"bui-checkbox")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">':"radio"==C.type?n='        <input id="check-'+i+"-"+e+'" type="radio" class="'+(C.className||"bui-radio")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">':"select"==C.type&&(n='        <input id="check-'+i+"-"+e+'" type="radio" class="'+(C.className||"bui-choose")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">'),o+='    <div class="bui-btn bui-box bui-btn-line">',"left"==C.direction&&(o+=n),"center"==C.direction?(o+='        <div class="span1" align="center"><label for="check-'+i+"-"+e+'" >'+t.name+"</label></div>",o+=n):o+='        <div class="span1"><label for="check-'+i+"-"+e+'" >'+t.name+"</label></div>","right"==C.direction&&(o+=n),o+="    </div>"}),o+="    </div>",C.popup&&(o+="  </div>",C.buttons.length>0&&(o+='    <div class="bui-dialog-foot bui-box-space">',t(C.buttons).each(function(e,t){o+='        <div class="span1">',o+='             <div class="bui-btn round '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",o+="        </div>"}),o+="    </div>"),o+="</div>"),o}function a(e){return C.popup&&y?!y.isOpen()&&y.open(function(){e&&e.call(T)}):(v.css("display","block"),e&&e.call(T)),this}function r(e){return C.popup&&y?y.isOpen()&&y.close(function(){e&&e.call(T)}):(v.css("display","none"),e&&e.call(T)),this}function s(n){var i=[];if(w=[],x=[],!n&&""!=n){var o=v.attr("value");return o}n.indexOf(",")>-1?i=n.split(","):i.push(n),v.find(".bui-list").children().each(function(n,o){var a=t(this).find("input"),r=a.val(),s=a.attr("text");e.compareArray(r,i)&&(w.push(s),x.push(r),a.attr("checked","checked"))}),p&&C.change&&p.attr("value",x.join(",")),v.attr("value",x.join(","))}function c(e){if(!e&&""!=e){var e=v.attr("text");return e}p&&C.change&&(p.attr("text",e),b.html(e||m)),v.attr("text",e)}function l(){if("radio"!=C.type||"select"!=C.type){var e=[],n=[];v.find("input").each(function(i,o){var a=t(this),r=a.val(),s=a.attr("text");e.push(s),n.push(r),a.prop("checked",!0)}),s(n.join(",")||""),c(e.join(",")||"")}return this}function u(){return v.find("input").prop("checked",null),s(""),c(""),this}function d(e){if("radio"!=C.type||"select"!=C.type){var n=[],i=[];v.find("input").each(function(e,o){var a=t(this).is(":checked"),r=t(this).val(),s=t(this).attr("text");a?t(this).prop("checked",null):(t(this).prop("checked",!0),n.push(s),i.push(r))}),s(i.join(",")||""),c(n.join(",")||"")}}function f(t){var n=y&&{dialog:y};return e.widget.call(n,t)}function h(t,n){return e.option.call(T,t,n)}var p,v,g,m,b,w,x,y,k={id:"",trigger:"",triggerChildren:".span1",className:"",data:[],popup:!0,title:"",autoClose:!1,height:0,width:0,mask:!0,change:!0,effect:"fadeInUp",type:"radio",direction:"right",position:"bottom",fullscreen:!1,buttons:[],onChange:null,callback:null},T={value:s,text:c,show:a,hide:r,selectAll:l,selectNone:u,unselect:d,widget:f,option:h,config:C,init:i},C=T.config=t.extend(!1,{},k,e.config.select,n);return i(C),T},e}(bui||{},libs),function(e,t){"use strict";return e.btn=function(n){function i(t){return"object"==typeof t?(u.id=t.id||"",u.handle=t.handle||"",u.progress=!!t.progress):"string"==typeof t&&(u.id=t||"",u.handle="",u.progress=!1),s=e.obj(u.id),l=u.handle,c=u.progress,this}function o(n,i){n=n,i=i;var o;r(),s.on("click.bui",l,function(a){var r=n||t(this).attr("href"),l=t(this).attr("target"),u=t(this).hasClass("disabled");if(r&&!u){var d,f=t(this).attr("param")||"",h=f&&f.indexOf("{")>-1&&f.indexOf("}")>-1?JSON.parse(t(this).attr("param")):{},p=t.extend(!0,h,i),v=t(this).attr("progress")?"false"!=t(this).attr("progress"):c;v&&(d=e.loading({autoTrigger:!0}));var g=e.mask({id:s,opacity:0,autoTrigger:!0});o&&clearTimeout(o),o=setTimeout(function(){g.remove()},500);var m={url:r,param:p};"_blank"==l?e.run(r,p):e.load(m)}})}function a(n,i){var i=i||{};r(),s.on("click.bui",l,function(o){var a=this,r=t(a).css("background"),s="none"==r?"#fff":r;i.appendTo=a,i.background=i.background||s,i.autoClose=0!=i.autoClose,i.autoTrigger=0!=i.autoTrigger;var c=e.loading(i);return n&&n.call(a,c)})}function r(){return s.off("click.bui",l),this}var s,c,l,u={};return i(n),{load:o,submit:a,off:r}},e}(bui||{},libs),function(e){"use strict";return e.dropdown=function(t){function n(t){if(t=t||w,!t.id)return void e.hint("dropdown id不能为空");d=e.obj(t.id),w=b.config=t,f=d.children(t.handle),g=t.target?d.children(t.target):f.next(),p=t.relative,h=d.attr("position")||t.position;var n=d.offset()&&d.offset().left||0,l=t.width?"auto":-n+"px",u={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:l},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:l},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};v=t.width>0?t.width:p?x:t.width,parseFloat(v)>0&&g.width(v);var m=t.showArrow?u[h].menuPosition+" "+u[h].arrowPosition:u[h].menuPosition;i(m,u[h].left);var y=g.find(".active").eq(0);if(y.length>0){var k=$.trim(y.text()),T=y.attr("value")||"";a(k),o(T),r(),!t.showActive&&g.find(t.targetHandle).removeClass("active")}return f.off("click.bui").on("click.bui",function(e){var t=$(this).hasClass("active");c(),t?r():s(),e.stopPropagation()}),g.off("click.bui").on("click.bui",t.targetHandle,function(e){var n=$(this).attr("value")||"",i=$.trim($(this).text()),s=void 0!=d.attr("change")?d.attr("change"):t.change;t.showActive&&$(this).addClass("active").siblings().removeClass("active"),1==s&&a(i),o(n),r(),t.callback&&t.callback.call(this,b,i,n)}),$("body").off("click.bui").on("click.bui",function(e){c(),e.stopPropagation()}),this}function i(e,t){g.addClass(e),p&&g.css({left:t})}function o(e){if(void 0==e){var t=f.attr("value");return t}f.attr("value",e)}function a(e){if(void 0==e){var t=$.trim(f.text());return t}var n=f.children(w.handleChildren);n?n.text(e):f.text(e)}function r(){f.removeClass("active"),g.css("display","none")}function s(){f.addClass("active"),g.css("display","block")}function c(){$(".bui-dropdown > .bui-btn").removeClass("active"),$(".bui-dropdown > .bui-list").css("display","none")}function l(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(b,t,n)}var d,f,h,p,v,g,m={id:"",handle:".bui-btn",handleChildren:".span1",target:"",targetHandle:".bui-btn",position:"bottom",showArrow:!1,showActive:!1,width:0,relative:!0,change:!0,callback:null},b={value:o,text:a,hide:r,show:s,hideAll:c,widget:l,option:u,config:w,init:n},w=b.config=$.extend(!0,{},m,e.config.dropdown,t),x=document.documentElement.clientWidth;return n(w),b},e}(bui||{}),function(e,t){"use strict";return e.accordion=function(n){function i(n){return n=n||y,v=document.documentElement.clientWidth,g=document.documentElement.clientHeight,p=e.obj(n.id)||t("."+e.prefix("accordion")),y=x.config=n,m=p.children(n.handle),b=p.children(n.target),o(n),a(n),this}function o(e){b.css("display","none");g-t("header").height()-t("footer").height();parseFloat(e.targetHeight)>0&&b.height(e.targetHeight),parseFloat(e.height)>0&&p.height(e.height)}function a(e){p.off("click.bui",e.handle).on("click.bui",e.handle,function(t){var n=this;r(n,e),e.callback&&e.callback.call(this,x)})}function r(e,n){var i=t(e).hasClass("active"),o=t(e).next(n.target);n.single?i?(m.removeClass("active"),b.css("display","none")):(t(e).addClass("active").siblings(n.handle).removeClass("active"),o.css("display","block").siblings(n.target).css("display","none")):i?(t(e).removeClass("active"),o.css("display","none")):(t(e).addClass("active"),o.css("display","block"))}function s(e){var e=Number(e)||0;return m.each(function(n,i){n==e&&t(this).addClass("active").next(y.target).css("display","block")}),this}function c(e){var e=Number(e)||0;return m.each(function(n,i){n==e&&t(i).removeClass("active").next(y.target).css("display","none")}),this}function l(){return p.length>1?p.each(function(e,n){t(n).children(y.handle).eq(0).trigger("click")}):p.children(y.handle).eq(0).trigger("click"),this}function u(){return m.each(function(e,n){t(n).addClass("active").next(y.target).css("display","block")}),this}function d(){return m.each(function(e,n){t(n).removeClass("active").next(y.target).css("display","none")}),this}function f(t){var n={};return e.widget.call(n,t)}function h(t,n){return e.option.call(x,t,n)}var p,v,g,m,b,w={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,callback:null},x={showFirst:l,showAll:u,hideAll:d,show:s,hide:c,widget:f,option:h,config:y,init:i},y=x.config=t.extend(!0,{},w,e.config.accordion,n);return i(y),x},e}(bui||{},libs),function(e,t){"use strict";return e.rating=function(n){function i(t){return t=t||y,t.id?(p=e.obj(t.id),y=x.config=t,v=t.fullClassName,g=t.halfClassName,s(t),r(t),this):void e.hint("rating id不能为空")}function o(t){var n=(e.guid(),""),i=0,o=t.stars;for(i=0;o>i;i++)n+='<div class="bui-rating-cell" ></div>';return n}function a(e){var t,n="",e=String(e)||String(m),i=0,o=y.stars,a=[];a=e.indexOf(".")>-1?e.split("."):[e,0];var r=parseInt(a[0]);for(t=a[1]/10*100+"%",i=0;o>i;i++)r>i&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),i==r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),i>r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return n}function r(e){if(!e.disabled){var n=String(e.value).indexOf(".")>-1?1:0;p.off("click.bui",e.handle).on("click.bui",e.handle,function(i){var o=t(this).index(),a=0;if(e.half){a=n%2==0?o+.5:o+1}else a=o+1;c(a),l(a),n++,e.callback&&e.callback.call(this,x),i.stopPropagation()})}}function s(e){if(e.render){var t=o(e);p.html(t),b=p.find(e.handle)}else b=p.find(e.handle);l(e.value)}function c(e){var n=[];e=String(e),y.half&&e.indexOf(".")>-1?n=e.split("."):n.push(e),b.removeClass(v).removeClass(g),b.each(function(e,i){1==n.length&&e<n[0]?t(i).addClass(v):2==n.length&&(e<n[0]&&t(i).addClass(v),e==n[0]&&t(i).addClass(g))})}function l(e){return e?(p.attr("value",e),c(e),m=e):m=p.attr("value"),m}function u(e){var t=a(e);p.attr("value",e).html(t),m=e}function d(e){var e=0!=e;return e?p.off("click.bui",y.handle):(y.disabled=!1,r()),this}function f(t){var n={};return e.widget.call(n,t)}function h(t,n){return e.option.call(x,t,n)}var p,v,g,m,b,w={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,callback:null},x={disabled:d,show:u,value:l,widget:f,option:h,config:y,init:i},y=x.config=t.extend(!0,{},w,e.config.rating,n);return i(y),x},e}(bui||{},libs),function(e){return e.actionsheet=function(t){function n(t){t=t||v,u=e.obj(t.trigger),v=p.config=t,d=e.guid();var n=o(t.buttons);return $(t.appendTo).append(n),l=e.dialog({id:d,position:t.position,mask:t.mask,onMask:function(e){a()}}),f=e.obj(d),$handle=f.find(t.handle),i(),this}function i(){v.callback&&$handle.off("click.bui").on("click.bui",function(e){v.callback.call(this,e,p)}),u&&u.off("click.bui").on("click.bui",function(e){r()})}function o(e){var t=parseFloat(v.width),n=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",i="";return e&&e.length&&(i+='<div id="'+d+'" class="bui-actionsheet" style="'+n+'">',i+='    <ul class="bui-list">',$.each(e,function(e,t){i+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"}),i+="    </ul>",v.cancelText?i+='    <div class="bui-btn" value="cancel">'+v.cancelText+"</div>":"",i+="</div>"),i}function a(e){l.isOpen()&&l.close(e)}function r(e){!l.isOpen()&&l.open(e)}function s(t){var n={dialog:l};return e.widget.call(n,t)}function c(t,n){return e.option.call(p,t,n)}var l,u,d,f,h={appendTo:"body",trigger:"",handle:".bui-btn",position:"bottom",width:0,mask:!0,buttons:[],cancelText:"取消",callback:null},p={hide:a,show:r,widget:s,option:c,config:v,init:n},v=p.config=$.extend(!1,{},h,e.config.actionsheet,t);return n(v),p},e}(bui||{}),function(e,t){return e.number=function(n){function i(t){return t=t||C,v=t.max,g=t.min,m=t.step,t.id?(y=e.obj(t.id),C=T.config=t,t.render&&a(t),b=t.prev.indexOf("#")>-1?e.obj(t.prev):y.children(t.prev),w=t.next.indexOf("#")>-1?e.obj(t.next):y.children(t.next),x=t.input.indexOf("#")>-1?e.obj(t.input):y.children(t.input),r(t),g>v?void e.hint("min值 不能大于 max值 "):(t.disabled&&x.attr({disabled:"disabled"}),c(t.value),this)):void e.hint("number id不能为空")}function o(e){var t="";return t+='    <div class="bui-number-prev">-</div>',t+='    <input type="text" value="0"/>',t+='    <div class="bui-number-next">+</div>'}function a(e){var t=o(e);return y.html(t),this}function r(e){return x.on("input",function(e){var n=isNaN(parseInt(t(this).val()))?0:parseInt(t(this).val());/^[0-9]*$/i.test(n)&&c(n),e.stopPropagation()}),b.on("click.bui",function(t){d(),e.callback&&e.callback.call(this,t,T)}),w.on("click.bui",function(t){f(),e.callback&&e.callback.call(this,t,T)}),this}function s(){var e=parseInt(x.val());return e}function c(t){return value=t||0,value>v&&(value=v,C.tips&&e.hint("输入的值大于最大值"),F=!1,S=!0),value<g&&(value=g,C.tips&&e.hint("输入的值小于最小值"),F=!0,S=!1),value>=g&&value<=v&&(value=value),x.val(parseInt(value)),this}function l(e){var t=0;return e?(c(e),t=e):t=s(),t}function u(e){var e=0!=e;return e?x.attr({disabled:"disabled"}):x.removeAttr("disabled"),this}function d(){if(!F){var e=x.val(),t=parseInt(e);if(t>g){var n=t-=m;t=n>g?n:g}else t=g;c(t)}return this}function f(){if(!S){var e=x.val(),t=parseInt(e);if(v>t){var n=t+=m;t=v>n?n:v}else t=v;c(t)}return this}function h(t){var n={};return e.widget.call(n,t)}function p(t,n){return e.option.call(T,t,n)}var v,g,m,b,w,x,y,k={id:null,min:0,max:100,step:1,value:0,disabled:!1,render:!0,tips:!0,prev:".bui-number-prev",input:"input",next:".bui-number-next",callback:null},T={disabled:u,value:l,prev:d,next:f,widget:h,option:p,config:C,init:i},C=T.config=t.extend(!0,{},k,e.config.number,n),S=!1,F=!1;return i(C),T},e}(bui||{},libs),function(e,t){"use strict";return e.stepbar=function(n){function i(n){if(n=n||v,!n.id)return void e.hint("stepbar id不能为空");d=e.obj(n.id),v=p.config=n;var i=o(n.data);return t(n.id).html(i),f=d.children(),a(n),this}function o(e){var n="";return t.each(e,function(e,t){n+='<div class="bui-stepbar-cell">',n+='    <span class="bui-stepbar-dot"></span>',n+='    <div class="bui-stepbar-text">',t.title&&(n+="        <h3>"+t.title+"</h3>"),t.subtitle&&(n+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(n+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),n+="    </div>",n+="</div>"}),n}function a(e){return d.off("click.bui",e.handle).on("click.bui",e.handle,function(n){if(e.click){var i=t(this).index();r(i)}e.callback&&e.callback.call(this,n,p)}),this}function r(e){if("number"==typeof e)return e=e>=f.length-1?f.length-1:0>e?0:e,f.each(function(n,i){e>n&&t(i).removeClass("active").addClass("visited"),n==e&&t(i).removeClass("visited").addClass("active"),n>e&&t(i).removeClass("visited active")}),e;var e=d.children(".active").index();return e}function s(){var e=r()+1;return r(e)}function c(){var e=r()-1;return r(e)}function l(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(p,t,n)}var d,f,h={id:null,handle:".bui-stepbar-cell",click:!0,data:[],callback:null},p={value:r,next:s,prev:c,widget:l,option:u,config:v,init:i},v=p.config=t.extend(!0,{},h,e.config.stepbar,n);return v.id?i(v):e.hint('id 为必填项, 例如:{ id: ""}'),p},e}(bui||{},libs);var Picker=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return e}function i(e,t){"string"!=typeof t&&(t+="ms");for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return e}function o(e,t){var n,i,o,a;return"undefined"==typeof t&&(t="x"),o=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new WebKitCSSMatrix("none"===i?"":i)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}var a=this,r={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};
for(var s in r)"undefined"==typeof e[s]&&(e[s]=r[s]);a.params=e,a.cols=[],a.initialized=!1;var c=function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=e.match(/(iPad).*OS\s([\d_]+)/),i=e.match(/(iPod)(.*OS\s([\d_]+))?/),o=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=n||i||o,r=!!t;return a||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!r}();return a.setValue=function(e,t){var n=0;if(0===a.cols.length)return a.value=e,void a.updateValue(e);for(var i=0;i<a.cols.length;i++)a.cols[i]&&!a.cols[i].divider&&(a.cols[i].setValue(e[n],t),n++)},a.updateValue=function(e){for(var t=e||[],n=[],i=0;i<a.cols.length;i++)a.cols[i].divider||(t.push(a.cols[i].value),n.push(a.cols[i].displayValue));t.indexOf(void 0)>=0||(a.value=t,a.displayValue=n,a.params.onChange&&a.params.onChange(a,a.value,a.displayValue))},a.initPickerCol=function(e,r){function s(e){if(!k&&!y){var t=e.originalEvent||e;t.preventDefault(),y=!0,T=C=t.targetTouches[0].pageY,S=(new Date).getTime(),P=!0,I=E=o(p.wrapper[0],"y")}}function l(e){if(y){var r=e.originalEvent||e;r.preventDefault(),P=!1,C=r.targetTouches[0].pageY,k||(t(x),k=!0,I=E=o(p.wrapper[0],"y"),i(p.wrapper,"0ms")),r.preventDefault();var s=C-T;E=I+s,O=void 0,b>E&&(E=b-Math.pow(b-E,.8),O="min"),E>w&&(E=w+Math.pow(E-w,.8),O="max"),n(p.wrapper,"translate3d(0,"+E+"px,0)"),p.updateItems(void 0,E,0,a.params.updateValuesOnTouchmove),R=E-D||E,M=(new Date).getTime(),D=E}}function u(e){if(!y||!k)return void(y=k=!1);y=k=!1,i(p.wrapper,""),O&&("min"===O?n(p.wrapper,"translate3d(0,"+b+"px,0)"):n(p.wrapper,"translate3d(0,"+w+"px,0)")),F=(new Date).getTime();var t,o;F-S>300?o=E:(t=Math.abs(R/(F-M)),o=E+R*a.params.momentumRatio),o=Math.max(Math.min(o,w),b);var r=-Math.floor((o-w)/g);a.params.freeMode||(o=-r*g+w),n(p.wrapper,"translate3d(0,"+parseInt(o,10)+"px,0)"),p.updateItems(r,o,"",!0),setTimeout(function(){P=!0},100)}function d(e){if(P){t(x);var n=$(this).attr("data-picker-value");p.setValue(n)}}var f=$(e),h=f.index(),p=a.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var v,g,m,b,w;p.replaceValues=function(e,t,n){p.destroyEvents(),p.values=e,p.displayValues=t;var i=a.columnHTML(p,!0);p.wrapper.html(i),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(n||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){a.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,v=p.wrapper[0].offsetHeight,g=p.items[0].offsetHeight,m=g*p.items.length,b=t/2-m+g/2,w=t/2-g/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),a.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),n(p.wrapper,"translate3d(0,"+w+"px,0)"),i(p.wrapper,"0ms");var x;p.setValue=function(e,t,o){"undefined"==typeof t&&(t="");var a=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();if("undefined"!=typeof a&&-1!==a){var r=-a*g+w;n(p.wrapper,"translate3d(0,"+r+"px,0)"),i(p.wrapper,t+"ms"),p.updateItems(a,r,t,o)}},p.updateItems=function(e,t,r,s){"undefined"==typeof t&&(t=o(p.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-w)/g)),0>e&&(e=0),e>=p.items.length&&(e=p.items.length-1);var l=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),i(p.items,r);var u=p.items.eq(e).addClass("picker-selected");if(n(u,""),a.params.rotateEffect){(t-(Math.floor((t-w)/g)*g+w))/g;p.items.each(function(){var e=$(this),i=e.index()*g,o=w-t,a=i-o,r=a/g,s=Math.ceil(p.height/g/2)+1,l=-18*r;l>180&&(l=180),-180>l&&(l=-180),Math.abs(r)>s?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),n(e,"translate3d(0, "+(-t+w)+"px, "+(c?-110:0)+"px) rotateX("+l+"deg)")})}(s||"undefined"==typeof s)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,l!=e&&(p.onChange&&p.onChange(a,p.value,p.displayValue),a.updateValue()))},r&&p.updateItems(0,w,0);var y,k,T,C,S,F,I,O,E,D,R,M,P=!0;p.initEvents=function(e){var t=e?"off":"on";p.container[t]("touchstart",s),p.container[t]("touchmove",l),p.container[t]("touchend",u),p.items[t]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},a.columnHTML=function(e,t){var n="",i="";if(e.divider)i+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var o=0;o<e.values.length;o++)n+='<div class="picker-item" data-picker-value="'+e.values[o]+'">'+(e.displayValues?e.displayValues[o]:e.values[o])+"</div>";i+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:i},a.layout=function(){var e,t="",n="";a.cols=[];var i="";for(e=0;e<a.params.cols.length;e++){var o=a.params.cols[e];i+=a.columnHTML(a.params.cols[e]),a.cols.push(o)}n="picker-modal picker-columns "+(a.params.cssClass||"")+(a.params.rotateEffect?" picker-3d":""),t='<div class="'+n+'"><div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',a.pickerHTML=t},a.init=function(){a.initialized||(a.layout(),a.container=$(a.pickerHTML),a.container.addClass("picker-modal-inline"),$(a.params.container).html(a.container),a.container.find(".picker-items-col").each(function(){var e=!0;(!a.initialized&&a.params.value||a.initialized&&a.value)&&(e=!1),a.initPickerCol(this,e)}),a.value?a.setValue(a.value,0):a.params.value&&a.setValue(a.params.value,0)),a.initialized=!0},a.init(),a};!function(e,t){return e.picker=function(e){return new Picker(e)},e}(bui||{},libs),function(e,t){return e.pickerdate=function(){function n(e){return e&&e.constructor==Date?e:"string"==typeof e?(e.replace("-","/"),new Date(e)):"number"==typeof e?new Date(e):void console.error('Failed to execute "transformTime" on Datepicker')}function i(i){function o(e){var t=new Date(0);return F.forEach(function(n,i){t["set"+n](e[k[n]].value)}),t}function a(e){var t=n(e);return F.map(function(e,n){return t["get"+e]()})}function r(e,t,n){var i=v.map(function(t,n){return parseInt(e.cols[k[t]].value)+("Month"===t?1:0)}).join("-"),o=g.map(function(t,n){var i=e.cols[k[t]].value;return("0"+i).slice(-2)}).join(":");return i+" "+o}function s(e){y&&(y.open(function(){}),s.hasOpen||(s.hasOpen=!0,w.reset()))}var c,l,u,d,f,h,p,v,g,m,b=i||{},w=this,x=function(){},y=null,k={},T=["FullYear","Month","Date"],C=["Hours","Minutes","Seconds"],S={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},F=[];this.config={},this.option=function(){},this.cols=function(e){e=e||{},v=[],g=[],p=[],k={},F=[],T.forEach(function(t,n){"none"!==e[S[t]]&&(F.push(t),v.push(t))}),C.forEach(function(t,n){"none"!==e[S[t]]&&(F.push(t),g.push(t))}),v.forEach(function(t,n){k[t]=p.length,p.push(O[t](e[S[t]]))}),g.forEach(function(t,n){0==n&&0!=v.length?p.push(O.Space()):p.push(O.Divider()),k[t]=p.length,p.push(O[t](e[S[t]]))}),w.picker&&(w.picker.params.cols=p,w.picker.initialized=!1,w.picker.init())},this.id=function(e){e&&!d&&(d=e)},this.reset=function(){w.picker&&(w.picker.initialized=!1,w.picker.init())},this.min=function(e){l=n(e||b.min||"1960/01/01 00:00:00")},this.max=function(e){u=n(e||b.max||"2030/01/01 00:00:00")},this.value=function(e){var t=n(e),i=a(t);w.picker.setValue(i,0)},this.handle=function(t){if(t&&c!==t){var n=e.obj(c);n&&n.off("click",s),n=e.obj(t),n&&n.on("click",s),s.hasOpen=!1,c=t}},this.formatValue=function(e){h=e||r},this.onChange=function(e){f=e||x},this.popup=function(n){var i=e.guid();return n.popup=0!=n.popup,n.mask=0!=n.mask,n.positon=n.positon||"bottom",n.popup&&!y&&(d=t('<div id="'+i+'" class="bui-dialog"></div>').appendTo(document.body),y=e.dialog({id:i,position:n.positon,mask:n.mask,onMask:function(e){y.close()}})),this};var I=function(e,t,n){var i=o(e.cols),a=l["get"+t](),r=u["get"+t](),s=i.getTime(),c=l.getTime(),d=u.getTime();return c>s&&i["get"+t]()<a?void e.cols[k[t]].setValue(a):s>d&&i["get"+t]()>r?void e.cols[k[t]].setValue(r):void(n&&(c>s||s>d)&&e.cols[k[n]].onChange(e))},O={};O.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=l.getFullYear(),n=u.getFullYear(),i=t;n>=i;i++)e.push(i);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){I(e,"FullYear",k.Month?"Month":"")}}},O.Month=function(e){return e=e||{values:[0,1,2,3,4,5,6,7,8,9,10,11],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,n){for(var i=new Date(e.cols[k.FullYear].value,parseInt(e.cols[k.Month].value)+1,0).getDate(),o=[],a=1;i>=a;a++)o.push(a);var r=e.cols[k.Date];r.replaceValues&&r.replaceValues(o,null,r.value<i?r.value:i),I(e,"Month",k.Date?"Date":"")}}},O.Date=function(e){return e=e||{values:function(){var e=31,t=[];do t.unshift(e);while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){I(e,"Date",k.Hours?"Hours":"")}}},O.Space=function(){return{divider:!0,content:"  "}},O.Hours=function(e){return e=e||function(){for(var e=[],t=[],n=0;24>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){I(e,"Hours",k.Minutes?"Minutes":"")}}},O.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},O.Minutes=function(e){return e=e||function(){for(var e=[],t=[],n=0;60>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){I(e,"Minutes",k.Seconds?"Seconds":"")}}},O.Seconds=function(e){return e=e||function(){for(var e=[],t=[],n=0;24>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){I(e,"Seconds")}}},w.min(b.min),w.max(b.max),w.cols(b.cols),w.onChange(b.onChange),w.formatValue(b.formatValue),w.popup(b),w.id(b.id),w.handle(b.handle),w.picker=e.picker({container:d,rotateEffect:!0,value:a(b.value?n(b.value):l),onChange:function(e,t,n){var i=h(e,t,n);m!=i&&(m=i,f(i))},cols:p})}return function(e){return new i(e)}}(),e}(bui||{},libs),function(e,t){return e.ajax=function(e){var n,i=t.Deferred();if(e=e||{},e.data=e.data||{},e.method=e.method||"GET",e.dataType=e.dataType||"json",e.timeout=e.timeout||6e4,e.headers=e.headers||{},e.processData=0!=e.processData,e.mimeType=e.mimeType||"none",e.cache=1==e.cache,"undefined"==typeof e.async&&(e.async=!0),"GET"!=e.method||void 0!==e.contentType&&""!==e.contentType?"POST"!=e.method||void 0!==e.contentType&&""!==e.contentType?e.contentType=e.contentType:e.contentType="application/x-www-form-urlencoded":e.contentType="text/html;charset=UTF-8",this.debug||"undefined"==typeof cordova||0==e["native"])n=t.ajax({async:e.async,url:e.url,data:e.data,type:e.method,dataType:e.dataType,headers:e.headers,contentType:e.contentType,timeout:e.timeout,processData:e.processData,mimeType:e.mimeType,cache:e.cache,success:function(e,t,n){var o;if("string"==typeof e)try{o=JSON.parse(e)}catch(a){o=e}else o=e||{};i.resolve(o,t,n)},error:function(e,t,n){var o;if("string"==typeof e)try{o=JSON.parse(e)}catch(a){o=e}else o=e||{};i.reject(o,t,n)}});else{var o=function(e,t,n){var o,a;if("string"==typeof e)try{o=JSON.parse(e)}catch(r){o=e}else o=e||{};if("string"==typeof o.returnValue)try{a=JSON.parse(o.returnValue)}catch(r){a=o.returnValue}else a=o.returnValue||{};i.resolve(a,t,n)},a=function(e,t,n){var o,a;if("string"==typeof e)try{o=JSON.parse(e)}catch(r){o=e}else o=e||{};if("string"==typeof o.returnValue)try{a=JSON.parse(o.returnValue)}catch(r){a=o.returnValue}else a=o.returnValue||{};i.reject(a,t,n)};Cordova.exec(o,a,"HttpRequest","ajax",[e.url,e.data,e.method,e.async,e.contentType,e.headers,e.timeout,e.dataType,e.processData,e.cache,e.mimeType])}return i.abort=function(){n&&n.abort()},i},e.load=function(t){var n,i,o=t.url;if(!t)return void e.hint("should be object like {url:'http://domain',params:{....}}");if(!o)return void e.hint("url is necessary!");if(i=t.param,this.debug||"undefined"==typeof cordova||0==t["native"])n=e.setUrlParams(t.url,i),window.location.href=n;else if(o.indexOf("http://")<0||o.indexOf("https://")<0||o.indexOf("file://")<0||o.indexOf("/")<0){var a=window.location.href,r=a.lastIndexOf("/");o=a.substring(0,r)+"/"+o,t.url=o,Cordova.exec(null,null,"Page","loadUrl",[t])}},e.getPageParams=function(e){var t,n;if("function"==typeof e?(t=e||function(){},n=!0):e&&e.callback&&(t=e.callback||function(){},n=e["native"]),this.debug||"undefined"==typeof cordova||0==n){var i=this.getUrlParams();t&&t(i)}else t&&app.getPageParams(t)},e.back=function(e){var t,n;"function"==typeof e?(t=e||function(){},n=!0):e&&e.callback&&(t=e.callback||function(){},n=e["native"]),this.debug||"undefined"==typeof cordova||0==n?window.history.back():app.back(t)},e.refresh=function(e){var t=e&&e["native"];this.debug||"undefined"==typeof cordova||0==t?window.location.reload():app.refresh()},e.run=function(t,n){var n=n||{};if(this.debug||"undefined"==typeof cordova){if(String(t).indexOf("http://")>-1){var i=e.setUrlParams(t,n),o=window.open("","_newtab");o.location=i}}else app.run(t,n)},e.checkVersion=function(n){var i={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},url:"",data:{},method:"GET",timeout:2e4,callback:null};n=n||{};var o=t.extend(!0,i,n),a=(o.url||"",o.data||{},'<span class="bui-badges"></span>'),r=e.obj(o.id),s=o.target.indexOf("#")>-1?e.obj(o.target):r?r.find(o.target):null,c=e.confirm,l=function(){var e=s?s.find(".bui-badges").length:1;e||s.append(a)},u=function(){s?s.find(".bui-badges").remove():""};this.debug||"undefined"==typeof cordova?e.hint("检测版本, 需要在手机端才能使用!"):app.getInfo(function(n){e.ajax(o).done(function(e){var i;"object"==typeof e?i=e:"string"==typeof e&&(i=JSON.parse(e));var a=i.versionName,s=parseInt(i.versionCode),d=parseInt(i.minVersionCode),f=i.updateUrl||"",h=parseInt(n.versionCode),p=o.tips.minVersion,v=o.tips.nowVersion||"您目前的版本"+n.versionName+",已经是最新了 ^_^",g=i.remark||"检测到新版本"+a+",是否立即下载";i.isForced?d>h?(l(),c({title:o.title,content:p,always:!0,autoClose:!1,buttons:["立即下载"],callback:function(){try{app.run(f)}catch(e){}}})):h>d&&s>h?(l(),c({title:o.title,content:remark,buttons:["残忍拒绝","立即下载"],callback:function(){var e=t(this).text();"立即下载"==e&&app.run(f)}})):(u(),bui.hint(v)):s>h?l():u(),r&&r.on("click",function(){s>h?(l(),c({title:"新版本"+a,content:g,buttons:["残忍拒绝","立即下载"],callback:function(){var e=t(this).text();"立即下载"==e&&app.run(f)}})):(u(),bui.hint(v)),o.callback&&o.callback.call(this)})}).fail(function(t){e.hint(o.tips.fail)})})},e}(bui||{},libs),function(e,t){return e.file=function(n){function i(t){return w=e.fileselect(t),g=o(),C?p="bui.app":window.app&&app.getInfo(function(e){h=e.id||"bui.app",p=h}),m=a({root:!0,create:!0}),this}function o(){function e(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}var i={msg:t};n.reject(i)}var n=t.Deferred();if(C)v=window,b=1024*parseInt(k.size)*1024,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(b,function(t){window.webkitRequestFileSystem(window.PERSISTENT,t,function(e){n.resolve(e)},e)});else if(v=LocalFileSystem,b=0,window.requestFileSystem&&v)window.requestFileSystem(v[T],b,function(e){n.resolve(e)},e);else{var i={msg:"不支持requestFileSystem"};n.reject(i)}return n}function a(e){var n={folderName:p,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),o="";i.create?(o="创建 ",i.param.create=!0):(o="获取 ",i.param.create=!1);var a=r(i.folderName);return a=i.root?a:p+"/"+a,g.done(function(e){e.root.getDirectory(a,i.param,function(t){i.onSuccess&&i.onSuccess.call(y,t,e)},function(e){var t={msg:o+a+" 文件夹失败"};i.onFail&&i.onFail.call(y,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(y,t)}),this}function r(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),r(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function s(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function c(e){var n={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),o="";if(i.create?(o="创建 ",i.param.create=!0):(o="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());var r=s(i.fileName);return a({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==p?e.name+"/"+r:p+"/"+e.name+"/"+r;t.root.getFile(n,i.param,function(e){i.onSuccess&&i.onSuccess.call(y,e,t)},function(e){var t={msg:o+r+" 文件失败"};i.onFail&&i.onFail.call(y,t)})},onFail:function(e){i.onFail&&i.onFail(e)}}),this}function l(e){var n=t.extend(!0,{},e);return a({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively(function(){n.onSuccess&&n.onSuccess.call(y,e,t)},function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(y,i,e)})},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(y,t)}}),this}function u(e){var n=t.extend(!0,{},e);return c({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove(function(){n.onSuccess&&n.onSuccess.call(y,e,t)},function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(y,i,e)})},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(y,t)}}),this}function d(e){var t=e||{};if(t.url)return Cordova.exec(function(e){t.onSuccess&&t.onSuccess.call(y,e)},function(e){t.onFail&&t.onFail.call(y,e)},"ExtendApp","openFile",[t.url,""]),this}function f(e){return w.toBase64(e),this}var h,p,v,g,m,b,w,x={size:10,"native":!0},y={getFolder:a,removeFolder:l,getFile:c,getFileName:s,removeFile:u,toBase64:f,open:d,init:i},k=y.config=t.extend(!0,{},x,e.config.file,n),T="PERSISTENT",C=e.debug||"undefined"==typeof cordova||0==k["native"];return i(k),y},e}(bui||{},libs),function(e,t){return e.fileselect=function(n){function i(){m=[],b&&r()}function o(e){function n(){var e={},t=navigator.camera.DestinationType;switch(e.quality=o.quality||40,e.targetWidth=void 0==o.width?void 0:o.targetWidth||800,e.targetHeight=void 0==o.height?void 0:o.targetHeight||800,e.correctOrientation=0!=o.correctOrientation,e.allowEdit=0!=o.allowEdit,e.params=o.params||{},o.from){case"photo":e.sourceType=Camera.PictureSourceType.PHOTOLIBRARY;break;case"camera":e.sourceType=Camera.PictureSourceType.CAMERA;break;case"savephoto":e.sourceType=Camera.PictureSourceType.SAVEDPHOTOALBUM;break;default:e.sourceType=Camera.PictureSourceType.PHOTOLIBRARY}switch(o.destinationType){case"data":e.destinationType=t.DATA_URL;break;default:e.destinationType=t.FILE_URI}navigator.camera.getPicture(function(n){if(e.destinationType==t.FILE_URI)window.resolveLocalFileSystemURI(n,function(e){var t=e.fullPath;g=t;var n=t.lastIndexOf("?"),a=0>n?void 0:n,r=t.slice(t.lastIndexOf(".")+1,a),s=t.slice(t.lastIndexOf("/")+1,a),c="image/"+r;if(!bui.compareArray(s,m,"name")){var l={name:s,data:t,type:c};m.push(l)}o.onSuccess&&o.onSuccess.call(i,t,m)},function(e){o.onFail&&o.onFail.call(i,e)});else{g=n;var a={name:"base64.jpg",data:n,type:"jpg"};m.push(a),o.onSuccess&&o.onSuccess.call(i,n,m)}},function(e){o.onFail&&o.onFail.call(i,e)},e)}g=null;var i=this,o=t.extend(!0,{width:800,height:800},p,e);if(b)f.off("change").on("change",function(e){var t=this.files;if(t.length<1&&o.onFail&&o.onFail.call(i,t,m),g=t,!bui.compareArray(t[0].name,m,"name")){var n={name:t[0].name,data:t,type:t[0].type,size:t[0].size,lastModifiedDate:t[0].lastModifiedDate.toLocaleDateString()};m.push(n)}o.onSuccess&&o.onSuccess.call(i,t,m)}),f[0].dispatchEvent(new Event("click"));else switch(o.mediaType){case"picture":n();break;case"video":n();break;default:n()}}function a(e){function t(e){e.root.getFile(w,null,n,a)}function n(e){e.file(i,a)}function i(e){o(e)}function o(e){var t=new FileReader;t.onloadend=function(t){s&&s.call(v,t.target.result,e)},t.readAsDataURL(e)}function a(e){c&&c.call(v,e.target.error.code)}var e=e||{},r=e.data||g,s=e.onSuccess,c=e.onFail;if(b)for(var l,u=0;l=r[u];u++)l.type.match("image.*")&&!function(e){o(e)}(l);else{var d=r.fullPath||r,f="file:///storage/emulated/0/",h=d.indexOf(f)>-1?27:0,p=d.lastIndexOf("?"),m=0>p?void 0:p,w=d.slice(h,m);window.requestFileSystem(LocalFileSystem.PERSISTENT,0,t,a)}return this}function r(){if(void 0==f){d=bui.guid();var e='<input type="file" name="uploadFiles" id="'+d+'" hidden/>';t("body").append(e),f=t("#"+d)||t('input[name="uploadFiles"]')}}function s(t,n){var n=n||"name";if("string"==typeof t){e.alert(t),m=bui.removeArray(t,m,n);var i=m.length?m[m.length-1].data:null;return g=i,m}return this}function c(){return m=[],g=null,m}function l(){return m}function u(){return g}var d,f,h={"native":!0,mediaType:"picture"},p=t.extend(!0,{},h,e.config.fileSelect,n),v={add:o,remove:s,clear:c,value:u,data:l,toBase64:a,init:i},g=null,m=[],b=e.debug||"undefined"==typeof cordova||0==p["native"];return i(p),v},e}(bui||{},libs),function(e,t){return e.download=function(n){function i(t){return h=e.file({"native":t["native"]}),w=e.loading({display:"block",callback:function(){r()}}),h.getFolder({folderName:t.folderName,create:!1,onSuccess:function(e,t){g=e.fullPath},onFail:function(e){h.getFolder({folderName:t.folderName,create:!0,onSuccess:function(e,t){g=e.fullPath},onFail:function(e){S&&S(e)}})}}),t.url?(o(t),this):void(S&&S(err))}function o(n){var i=t.extend(!0,{},k,n);return p=i.url,v=encodeURI(p),C=i.onProgress,onSuccess=i.onSuccess,S=i.onFail,i.showProgress&&w.show({text:"0%"}),m=g+"/"+h.getFileName(p),T?(l(),e.hint("暂不支持web下载"),void(S&&S.call(y))):(f=new FileTransfer,f.onprogress=s,f.download(v,m,function(e){onSuccess&&onSuccess.call(y,e.fullPath,e,w)},function(e){l(),S&&S.call(y,e,w)},!1,{headers:i.headers}),void 0)}function a(e){var n=t.extend(!0,{autoDown:!0},k,e),i=h.getFileName(n.url);h.getFile({fileName:i,folderName:n.folderName,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(y,e.fullPath,e,t)},onFail:function(e){n.autoDown=o(n)}})}function r(e){l(),f&&f.abort(),e&&e.call(y,w,f)}function s(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);b=t.toString()+"%",100>t?c(b):l(),C&&C.call(y,b)}})}function c(e){w&&w.show({text:e})}function l(){w&&w.stop()}function u(e){return h.toBase64(e),this}function d(t){var n={loading:w,file:h,ajax:f};return e.widget.call(n,t)}var f,h,p,v,g,m,b,w,x={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},y={getFile:a,start:o,stop:r,toBase64:u,init:i,widget:d},k=y.config=t.extend(!0,{},x,e.config.download,n),T=e.debug||"undefined"==typeof cordova||0==k["native"],C=(k.showProgress,k.onProgress),S=k.onFail;return i(k),y},e}(bui||{},libs),function(e,t){return e.upload=function(n){function i(t){m=e.loading({display:"block",callback:function(){u()}}),b=e.fileselect({"native":t["native"],mediaType:t.mediaType}),t.data&&l(t)}function o(e){var t=b.add.bind(S);return t(e),this}function a(e,t){return b.remove(e,t),this}function r(){return b.clear(),this}function s(e){return b.toBase64(e),this}function c(){return b.data()}function l(n){var i=t.extend(!0,{},C,n);return y=i.url,x=i.data||b.value(),F=i.showProgress,x?(F&&m.show(),e.debug||"undefined"==typeof cordova||0==i["native"]?d(i):f(i),this):void 0}function u(e){return m&&m.stop(),w&&w.abort(),e&&e.call(S,m,w),this}function d(e){e.cache=!1,e.contentType=!1,e.processData=!1,e.method="POST";var n=e.onSuccess,i=e.onFail,o=new FormData;return t.each(x,function(t,n){o.append(e.fileKey,n)}),w=t.ajax({url:y,type:e.method,data:o,cache:e.cache,headers:e.headers,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();return h&&e.upload?(e.upload.addEventListener("progress",h,!1),e):void 0},success:function(e){v(),n&&n.call(S,e)},fail:function(e,t){v(),i&&i.call(S,e,t)}}),this}function f(e){var t=e.onSuccess,n=e.onFail;y=encodeURI(e.url);var i;switch(e.mediaType){case"picture":i=navigator.camera.MediaType.PICTURE;break;case"video":i=navigator.camera.MediaType.VIDEO;break;default:i=navigator.camera.MediaType.ALLMEDIA}var o=new FileUploadOptions;o.fileKey=e.fileKey,o.mimeType=e.mimeType,o.fileName=x.substr(x.lastIndexOf("/")+1)||"image.jpg",o.params=e.data,o.mediaType=i;var a=new FileTransfer;return a.onprogress=h,a.upload(x,y,function(e){v();var n=JSON.parse(e.response);t&&t.call(S,n)},function(e){v(),n&&n.call(S,e)},C),this}function h(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",100>t?p(k):v(),I&&I.call(S,k)}})}function p(e){return m&&m.show({text:e}),this}function v(){return m&&m.stop(),this}function g(t){var n={loading:m,fileselect:b,ajax:w};return e.widget.call(n,t)}var m,b,w,x,y,k,T={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,"native":!0,fileKey:"file",mimeType:"image/jpeg",mediaType:"allmedia",onProgress:null,onSuccess:null,onFail:null},C=t.extend(!0,{},T,e.config.upload,n),S={init:i,add:o,remove:a,clear:r,data:c,start:l,stop:u,toBase64:s,widget:g},F=C.showProgress,I=C.onProgress;return i(C),S},e}(bui||{},libs),function(e,t){return e.ready=function(n){0==this.debug?"undefined"==typeof cordova||"undefined"==typeof app?console.error("请检查页面有没有引入 Cordova.js 及 bingotouch.js"):e.platform().isMac()||e.platform().isWindow()?console.error("调用手机原生功能,需要在debugtool中打开"):document.addEventListener("deviceready",function(){n&&n()},!1):this.debug&&e.platform().isWeiXin()&&window.app&&window.app.init?window.onload=function(){return weixinConfig&&""!=weixinConfig.appId&&""!=weixinConfig.appSecret?void app.init(weixinConfig,function(){n&&n()}):(console.error("微信开发请检查 js/app/_config.js weixinConfig的配置"),!1)}:t(document).ready(function(){n&&n()})},e}(bui||{},libs),function(e,t){return e.init=function(e){var t=function(e){return document.getElementsByTagName(e)[0]||document.getElementById(e)},n=e||document.documentElement.clientHeight;if(t("main")){var i=t("header"),o=t("footer"),a=t("main"),r=i?i.offsetHeight:0,s=o?o.offsetHeight:0,c=n-r-s;return a.style.height=c+"px",this}},t(document).ready(function(){e.platform().isWindow()||e.platform().isMac()?window.viewport=e.viewport(60):e.platform().isIpad()?window.viewport=e.viewport(70):window.viewport=e.viewport(),e.config.init.auto&&e.init(),"function"==typeof FastClick&&FastClick.attach(document.body)}),e}(bui||{},libs),function(){var e=/hp-tablet/gi.test(navigator.appVersion),t="ontouchstart"in window&&!e,n=t?"touchstart":"mousedown",i=t?"touchmove":"mousemove",o=!1,a=!1;document.documentElement.addEventListener(n,function(e){a=!0},!0),document.documentElement.addEventListener(i,function(e){o=a},!0),document.documentElement.addEventListener("touchend",function(e){o=!1,a=!1},!0),document.documentElement.addEventListener("click",function(e){o&&e.stopPropagation(),o=!1,a=!1},!0)}();